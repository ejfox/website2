{
  "html": "<h2 class=\"\" id=\"building-a-photo-gallery-that-feels-like-throwing-pictures-on-a-table\">Building a Photo Gallery That Feels Like Throwing Pictures on a Table</h2>\n<p class=\"\">The best photo workflows are invisible. You take a photo, it shows up on your website automatically, and your friends can browse through your life without you having to think about it. But getting there requires some upfront automation that bridges the gap between \"I just took this photo\" and \"it's live on the internet.\"</p>\n<p class=\"\">Here's how I built a photography system that starts with Mac Finder tags and ends with a web gallery that has randomized layouts, deep EXIF analytics, and keyboard navigationâ€”all powered by Cloudinary as both CDN and CMS.</p>\n<h3 class=\"\" id=\"the-three-act-structure\">The Three-Act Structure</h3>\n<p class=\"\">The workflow breaks down into three acts:</p>\n<ol class=\"list-decimal\">\n<li class=\"\"><strong class=\"\">Import &#x26; Organize</strong>: SD cards flow into <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">~/dump/</code>, get organized into <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">~/media/</code> by date and type</li>\n<li class=\"\"><strong class=\"\">Curate &#x26; Upload</strong>: Use Finder's color tags (green = publish) + Automator to batch upload to Cloudinary</li>\n<li class=\"\"><strong class=\"\">Display &#x26; Analytics</strong>: Nuxt gallery pulls from Cloudinary with sophisticated EXIF processing and randomized layouts</li>\n</ol>\n<p class=\"\">Let's walk through each piece.</p>\n<h3 class=\"\" id=\"act-i-import--organize\">Act I: Import &#x26; Organize</h3>\n<p class=\"\">Everything starts in <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">~/dump/</code>. I used to create project folders that would grow cobwebs when I inevitably moved on to the next shiny thing. Now everything flows through a single intake directory that gets regularly organized.</p>\n<h4 class=\"\" id=\"sd-card-import\">SD Card Import</h4>\n<p class=\"\">When I plug in an SD card from my Fujifilm, helmet cam, or field recorder, an Automator action asks if I want to import to <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">~/dump/</code>. If yes, this script copies only the file types I care about:</p>\n<figure class=\"relative rounded-lg overflow-hidden shadow-sm max-w-prose mx-auto\" data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#09090b;color:#cccac2\" tabindex=\"0\" data-language=\"bash\" data-theme=\"\"><code data-language=\"bash\" data-theme=\"\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">#!/bin/bash</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">totalFiles</span><span style=\"color:#F29E74\">=</span><span style=\"color:#D5FF80\">0</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">totalSize</span><span style=\"color:#F29E74\">=</span><span style=\"color:#D5FF80\">0</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFD173\">handle_folder</span><span style=\"color:#CCCAC2\">() {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    for</span><span style=\"color:#CCCAC2\"> aFile </span><span style=\"color:#FFAD66\">in</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#DFBFFF\">$1</span><span style=\"color:#D5FF80\">\"/*</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> do</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">        if</span><span style=\"color:#CCCAC2\"> [ </span><span style=\"color:#F29E74\">-d</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$aFile</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\"> ]</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> then</span></span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">            handle_folder</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$aFile</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">        elif</span><span style=\"color:#CCCAC2\"> [</span><span style=\"color:#D5FF80\">\"$(</span><span style=\"color:#F28779\">echo</span><span style=\"color:#CCCAC2\"> $aFile</span><span style=\"color:#F29E74\"> |</span><span style=\"color:#73D0FF\"> tr</span><span style=\"color:#D5FF80\"> '[:upper:](\"$(echo-$afile-|-tr-'[:upper:)]' '[:lower:]')\"</span><span style=\"color:#F29E74\"> =~</span><span style=\"color:#95E6CB\"> \\.</span><span style=\"color:#CCCAC2\">(jpe</span><span style=\"color:#F29E74\">?</span><span style=\"color:#CCCAC2\">g</span><span style=\"color:#F29E74\">|</span><span style=\"color:#CCCAC2\">mp[</span><span style=\"color:#DFBFFF\">34</span><span style=\"color:#CCCAC2\">]</span><span style=\"color:#F29E74\">|</span><span style=\"color:#CCCAC2\">raf</span><span style=\"color:#F29E74\">|</span><span style=\"color:#CCCAC2\">wav)$ ]]</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> then</span></span>\n<span data-line=\"\"><span style=\"color:#F28779\">            echo</span><span style=\"color:#D5FF80\"> \"Copying file </span><span style=\"color:#CCCAC2\">$aFile</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">            newFilePath</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$HOME</span><span style=\"color:#D5FF80\">/dump/</span><span style=\"color:#CCCAC2\">$(</span><span style=\"color:#73D0FF\">basename</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$aFile</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">            cp</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$aFile</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$newFilePath</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">            totalFiles</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$((</span><span style=\"color:#73D0FF\">totalFiles</span><span style=\"color:#D5FF80\"> +</span><span style=\"color:#DFBFFF\"> 1</span><span style=\"color:#CCCAC2\">))</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">            totalSize</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$((</span><span style=\"color:#73D0FF\">totalSize</span><span style=\"color:#D5FF80\"> +</span><span style=\"color:#CCCAC2\"> $(</span><span style=\"color:#73D0FF\">du</span><span style=\"color:#95E6CB\"> -k</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$aFile</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#F29E74\"> |</span><span style=\"color:#73D0FF\"> cut</span><span style=\"color:#95E6CB\"> -f1</span><span style=\"color:#CCCAC2\">)))</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">        fi</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    done</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">}</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">mkdir</span><span style=\"color:#95E6CB\"> -p</span><span style=\"color:#CCCAC2\"> $HOME</span><span style=\"color:#D5FF80\">/dump</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\"># List all volumes and handle each (excluding system disk)</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">for</span><span style=\"color:#CCCAC2\"> sdcard </span><span style=\"color:#FFAD66\">in</span><span style=\"color:#D5FF80\"> /Volumes/*</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> do</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> [ </span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\">$sdcard</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#F29E74\"> !=</span><span style=\"color:#D5FF80\"> \"/Volumes/Macintosh HD\"</span><span style=\"color:#CCCAC2\"> ] </span><span style=\"color:#CCCAC2B3\">&#x26;&#x26;</span><span style=\"color:#CCCAC2\"> [ </span><span style=\"color:#F29E74\">-d</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$sdcard</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\"> ]</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> then</span></span>\n<span data-line=\"\"><span style=\"color:#F28779\">        echo</span><span style=\"color:#D5FF80\"> \"Handling SD Card: </span><span style=\"color:#CCCAC2\">$sdcard</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">        handle_folder</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$sdcard</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    fi</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">done</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\"># Convert size to GB and notify</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">totalSizeGB</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$(</span><span style=\"color:#F28779\">echo</span><span style=\"color:#D5FF80\"> \"scale=2; </span><span style=\"color:#CCCAC2\">$totalSize</span><span style=\"color:#D5FF80\">/1024/1024\"</span><span style=\"color:#F29E74\"> |</span><span style=\"color:#73D0FF\"> bc</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">osascript</span><span style=\"color:#95E6CB\"> -e</span><span style=\"color:#D5FF80\"> \"display notification </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Successfully copied </span><span style=\"color:#CCCAC2\">$totalFiles</span><span style=\"color:#D5FF80\"> files totaling </span><span style=\"color:#CCCAC2\">$totalSizeGB</span><span style=\"color:#D5FF80\"> GB to the dump folder</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\"> with title </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">File Operation Summary</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">\"</span></span><button type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"#!/bin/bash\n\ntotalFiles=0\ntotalSize=0\n\nhandle_folder() {\n    for aFile in &#x22;$1&#x22;/*; do\n        if [ -d &#x22;$aFile&#x22; ]; then\n            handle_folder &#x22;$aFile&#x22;\n        elif [&#x22;$(echo $aFile | tr &#x27;[:upper:](&#x22;$(echo-$afile-|-tr-&#x27;[:upper:)]&#x27; &#x27;[:lower:]&#x27;)&#x22; =~ \\.(jpe?g|mp[34]|raf|wav)$ ]]; then\n            echo &#x22;Copying file $aFile&#x22;\n            newFilePath=$HOME/dump/$(basename &#x22;$aFile&#x22;)\n            cp &#x22;$aFile&#x22; &#x22;$newFilePath&#x22;\n\n            totalFiles=$((totalFiles + 1))\n            totalSize=$((totalSize + $(du -k &#x22;$aFile&#x22; | cut -f1)))\n        fi\n    done\n}\n\nmkdir -p $HOME/dump\n\n# List all volumes and handle each (excluding system disk)\nfor sdcard in /Volumes/*; do\n    if [ &#x22;$sdcard&#x22; != &#x22;/Volumes/Macintosh HD&#x22; ] &#x26;&#x26; [ -d &#x22;$sdcard&#x22; ]; then\n        echo &#x22;Handling SD Card: $sdcard&#x22;\n        handle_folder &#x22;$sdcard&#x22;\n    fi\ndone\n\n# Convert size to GB and notify\ntotalSizeGB=$(echo &#x22;scale=2; $totalSize/1024/1024&#x22; | bc)\nosascript -e &#x22;display notification \\&#x22;Successfully copied $totalFiles files totaling $totalSizeGB GB to the dump folder\\&#x22; with title \\&#x22;File Operation Summary\\&#x22;&#x22;\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>\n<p class=\"\">The key insight: only copy files I actually care about (.jpg, .mp4, .raf, .wav) and give me a notification with the totals so I know it worked.</p>\n<h4 class=\"\" id=\"organizing-the-dump\">Organizing the Dump</h4>\n<p class=\"\">When <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">~/dump/</code> gets unwieldy, I run another script that organizes everything by creation date and media type:</p>\n<figure class=\"relative rounded-lg overflow-hidden shadow-sm max-w-prose mx-auto\" data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#09090b;color:#cccac2\" tabindex=\"0\" data-language=\"bash\" data-theme=\"\"><code data-language=\"bash\" data-theme=\"\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">#!/bin/bash</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">shopt</span><span style=\"color:#95E6CB\"> -s</span><span style=\"color:#D5FF80\"> globstar</span><span style=\"color:#D5FF80\"> nullglob</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\"># Get creation date and format it to YYYY-MM-DD</span></span>\n<span data-line=\"\"><span style=\"color:#FFD173\">getDate</span><span style=\"color:#CCCAC2\">() {</span></span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">    date</span><span style=\"color:#95E6CB\"> -r</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#DFBFFF\">$1</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#D5FF80\"> +'%Y-%m-%d'</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">}</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\"># Iterate recursively over all files in ~/dump/</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">for</span><span style=\"color:#CCCAC2\"> file </span><span style=\"color:#FFAD66\">in</span><span style=\"color:#D5FF80\"> ~/dump/**/*.*</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> do</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> [ </span><span style=\"color:#F29E74\">-f</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\"> ]</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> then</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">        file_date</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$(</span><span style=\"color:#73D0FF\">getDate</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">        mime_type</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$(</span><span style=\"color:#73D0FF\">file</span><span style=\"color:#95E6CB\"> --mime-type</span><span style=\"color:#95E6CB\"> -b</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#F29E74\"> |</span><span style=\"color:#73D0FF\"> awk</span><span style=\"color:#95E6CB\"> -F</span><span style=\"color:#D5FF80\">'/'</span><span style=\"color:#D5FF80\"> '{print $1}'</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">        dir_name</span><span style=\"color:#F29E74\">=</span><span style=\"color:#D5FF80\">~/media/\"</span><span style=\"color:#CCCAC2\">$file_date</span><span style=\"color:#D5FF80\">\"/\"</span><span style=\"color:#CCCAC2\">$mime_type</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">        mkdir</span><span style=\"color:#95E6CB\"> -p</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$dir_name</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">        mv</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$dir_name</span><span style=\"color:#D5FF80\">\"/</span></span>\n<span data-line=\"\"><span style=\"color:#F28779\">        echo</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\"> : moved to </span><span style=\"color:#CCCAC2\">$dir_name</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#F29E74\"> >></span><span style=\"color:#D5FF80\"> ~/dump/_logs.txt</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    fi</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">done</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F28779\">echo</span><span style=\"color:#D5FF80\"> \"Organizing Completed $(</span><span style=\"color:#73D0FF\">date</span><span style=\"color:#D5FF80\"> +\"%T\")\"</span><span style=\"color:#F29E74\"> >></span><span style=\"color:#D5FF80\"> ~/dump/_logs.txt</span></span><button type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"#!/bin/bash\n\nshopt -s globstar nullglob\n\n# Get creation date and format it to YYYY-MM-DD\ngetDate() {\n    date -r &#x22;$1&#x22; +&#x27;%Y-%m-%d&#x27;\n}\n\n# Iterate recursively over all files in ~/dump/\nfor file in ~/dump/**/*.*; do\n    if [ -f &#x22;$file&#x22; ]; then\n        file_date=$(getDate &#x22;$file&#x22;)\n        mime_type=$(file --mime-type -b &#x22;$file&#x22; | awk -F&#x27;/&#x27; &#x27;{print $1}&#x27;)\n        dir_name=~/media/&#x22;$file_date&#x22;/&#x22;$mime_type&#x22;\n\n        mkdir -p &#x22;$dir_name&#x22;\n        mv &#x22;$file&#x22; &#x22;$dir_name&#x22;/\n        echo &#x22;$file : moved to $dir_name&#x22; >> ~/dump/_logs.txt\n    fi\ndone\n\necho &#x22;Organizing Completed $(date +&#x22;%T&#x22;)&#x22; >> ~/dump/_logs.txt\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>\n<p class=\"\">This creates a structure like <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">~/media/2025-08-29/image/</code> that makes it easy to browse chronologically.</p>\n<h3 class=\"\" id=\"act-ii-curate--upload\">Act II: Curate &#x26; Upload</h3>\n<p class=\"\">Here's where Finder's built-in tagging system becomes the star. Instead of building a custom interface for selecting photos, I use what's already there: Mac's color tags.</p>\n<h4 class=\"\" id=\"the-green-tag-upload-script\">The Green Tag Upload Script</h4>\n<p class=\"\">I naturally developed a workflow of tagging photos yellow for \"maybe\" and green for \"publish\". Then I built an Automator action that uploads all green-tagged files in a folder to Cloudinary:</p>\n<figure class=\"relative rounded-lg overflow-hidden shadow-sm max-w-prose mx-auto\" data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#09090b;color:#cccac2\" tabindex=\"0\" data-language=\"bash\" data-theme=\"\"><code data-language=\"bash\" data-theme=\"\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">#!/bin/bash</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">export</span><span style=\"color:#CCCAC2\"> CLOUDINARY_URL</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">cloudinary://YOUR_SECRET_HERE</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">for</span><span style=\"color:#CCCAC2\"> folder </span><span style=\"color:#FFAD66\">in</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#DFBFFF\">$@</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> do</span></span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">  # Find all green tagged files</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  green_files</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$(</span><span style=\"color:#73D0FF\">mdfind</span><span style=\"color:#95E6CB\"> -onlyin</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$folder</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#D5FF80\"> 'kMDItemUserTags == Green'</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  num_green_files</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$(</span><span style=\"color:#F28779\">echo</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$green_files</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#F29E74\"> |</span><span style=\"color:#73D0FF\"> wc</span><span style=\"color:#95E6CB\"> -l</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">  osascript</span><span style=\"color:#95E6CB\"> -e</span><span style=\"color:#D5FF80\"> \"display notification </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#CCCAC2\">$num_green_files</span><span style=\"color:#D5FF80\"> green files found.</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\"> with title </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Upload Green Media</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  successful_uploads</span><span style=\"color:#F29E74\">=</span><span style=\"color:#D5FF80\">0</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F28779\">  echo</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$green_files</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#F29E74\"> |</span><span style=\"color:#FFAD66\"> while</span><span style=\"color:#F28779\"> read</span><span style=\"color:#95E6CB\"> -r</span><span style=\"color:#D5FF80\"> file</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> do</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> [-n </span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\">](</span><span style=\"color:#73D0FF\">-n-</span><span style=\"color:#73D0FF\">\"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#73D0FF\">\"</span><span style=\"color:#CCCAC2\">) ]]</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> then</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      upload_output</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$(</span><span style=\"color:#73D0FF\">/opt/homebrew/bin/cld</span><span style=\"color:#D5FF80\"> uploader</span><span style=\"color:#D5FF80\"> upload</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#F29E74\"> 2>&#x26;1</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">      if</span><span style=\"color:#CCCAC2\"> [ </span><span style=\"color:#5CCFE6;font-style:italic\">$?</span><span style=\"color:#F29E74\"> -eq</span><span style=\"color:#DFBFFF\"> 0</span><span style=\"color:#CCCAC2\"> ]</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> then</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">        successful_uploads</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$((</span><span style=\"color:#73D0FF\">successful_uploads</span><span style=\"color:#D5FF80\"> +</span><span style=\"color:#DFBFFF\"> 1</span><span style=\"color:#CCCAC2\">))</span></span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">        osascript</span><span style=\"color:#95E6CB\"> -e</span><span style=\"color:#D5FF80\"> \"display notification </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Uploaded </span><span style=\"color:#CCCAC2\">$successful_uploads</span><span style=\"color:#D5FF80\"> of </span><span style=\"color:#CCCAC2\">$num_green_files</span><span style=\"color:#D5FF80\"> files to Cloudinary.</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\"> with title </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Upload Green Media</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">      else</span></span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">        osascript</span><span style=\"color:#95E6CB\"> -e</span><span style=\"color:#D5FF80\"> \"display notification </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Failed to upload </span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\"> to Cloudinary. Error: </span><span style=\"color:#CCCAC2\">$upload_output</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\"> with title </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Upload Green Media</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">      fi</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    fi</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  done</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">done</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">osascript</span><span style=\"color:#95E6CB\"> -e</span><span style=\"color:#D5FF80\"> \"display notification </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Done uploading files.</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\"> with title </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Upload Green Media</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">\"</span></span><button type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"#!/bin/bash\n\nexport CLOUDINARY_URL=cloudinary://YOUR_SECRET_HERE\n\nfor folder in &#x22;$@&#x22;; do\n  # Find all green tagged files\n  green_files=$(mdfind -onlyin &#x22;$folder&#x22; &#x27;kMDItemUserTags == Green&#x27;)\n  num_green_files=$(echo &#x22;$green_files&#x22; | wc -l)\n\n  osascript -e &#x22;display notification \\&#x22;$num_green_files green files found.\\&#x22; with title \\&#x22;Upload Green Media\\&#x22;&#x22;\n\n  successful_uploads=0\n\n  echo &#x22;$green_files&#x22; | while read -r file; do\n    if [-n &#x22;$file&#x22;](-n-&#x22;$file&#x22;) ]]; then\n      upload_output=$(/opt/homebrew/bin/cld uploader upload &#x22;$file&#x22; 2>&#x26;1)\n\n      if [ $? -eq 0 ]; then\n        successful_uploads=$((successful_uploads + 1))\n        osascript -e &#x22;display notification \\&#x22;Uploaded $successful_uploads of $num_green_files files to Cloudinary.\\&#x22; with title \\&#x22;Upload Green Media\\&#x22;&#x22;\n      else\n        osascript -e &#x22;display notification \\&#x22;Failed to upload $file to Cloudinary. Error: $upload_output\\&#x22; with title \\&#x22;Upload Green Media\\&#x22;&#x22;\n      fi\n    fi\n  done\ndone\n\nosascript -e &#x22;display notification \\&#x22;Done uploading files.\\&#x22; with title \\&#x22;Upload Green Media\\&#x22;&#x22;\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>\n<p class=\"\">The beauty here: I can right-click any folder and upload all green-tagged media. No custom interfaces, just using Mac's built-in file management augmented with automation.</p>\n<h4 class=\"\" id=\"screenshot-auto-upload\">Screenshot Auto-Upload</h4>\n<p class=\"\">For screenshots (which I take constantly while debugging or saving interesting web content), I have a folder action that auto-uploads anything that lands in the screenshots folder:</p>\n<figure class=\"relative rounded-lg overflow-hidden shadow-sm max-w-prose mx-auto\" data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#09090b;color:#cccac2\" tabindex=\"0\" data-language=\"bash\" data-theme=\"\"><code data-language=\"bash\" data-theme=\"\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">#!/bin/bash</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">export</span><span style=\"color:#CCCAC2\"> CLOUDINARY_URL</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">cloudinary://YOUR_SECRET_HERE</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">for</span><span style=\"color:#CCCAC2\"> file </span><span style=\"color:#FFAD66\">in</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#DFBFFF\">$@</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> do</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  if</span><span style=\"color:#CCCAC2\"> [ </span><span style=\"color:#F29E74\">-f</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\"> ]</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> then</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    upload_output</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$(</span><span style=\"color:#73D0FF\">/opt/homebrew/bin/cld</span><span style=\"color:#D5FF80\"> uploader</span><span style=\"color:#D5FF80\"> upload</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#D5FF80\"> use_filename=</span><span style=\"color:#DFBFFF\">true</span><span style=\"color:#D5FF80\"> unique_filename=</span><span style=\"color:#DFBFFF\">false</span><span style=\"color:#F29E74\"> 2>&#x26;1</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> [ </span><span style=\"color:#5CCFE6;font-style:italic\">$?</span><span style=\"color:#F29E74\"> -eq</span><span style=\"color:#DFBFFF\"> 0</span><span style=\"color:#CCCAC2\"> ]</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> then</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      url</span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\">$(</span><span style=\"color:#F28779\">echo</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$upload_output</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#F29E74\"> |</span><span style=\"color:#73D0FF\"> /opt/homebrew/bin/jq</span><span style=\"color:#95E6CB\"> -r</span><span style=\"color:#D5FF80\"> '.url'</span><span style=\"color:#F29E74\"> 2></span><span style=\"color:#D5FF80\">/dev/null</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">      if</span><span style=\"color:#CCCAC2\"> [ </span><span style=\"color:#F29E74\">-n</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$url</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#CCCAC2\"> ]</span><span style=\"color:#CCCAC2B3\">;</span><span style=\"color:#FFAD66\"> then</span></span>\n<span data-line=\"\"><span style=\"color:#F28779\">        echo</span><span style=\"color:#D5FF80\"> \"</span><span style=\"color:#CCCAC2\">$url</span><span style=\"color:#D5FF80\">\"</span><span style=\"color:#F29E74\"> |</span><span style=\"color:#73D0FF\"> pbcopy</span></span>\n<span data-line=\"\"><span style=\"color:#73D0FF\">        osascript</span><span style=\"color:#95E6CB\"> -e</span><span style=\"color:#D5FF80\"> \"display notification </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Uploaded </span><span style=\"color:#CCCAC2\">$file</span><span style=\"color:#D5FF80\"> to Cloudinary and URL copied to clipboard: </span><span style=\"color:#CCCAC2\">$url</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\"> with title </span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">Screenshot Upload</span><span style=\"color:#95E6CB\">\\\"</span><span style=\"color:#D5FF80\">\"</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">      fi</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    fi</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  fi</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">done</span></span><button type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"#!/bin/bash\n\nexport CLOUDINARY_URL=cloudinary://YOUR_SECRET_HERE\n\nfor file in &#x22;$@&#x22;; do\n  if [ -f &#x22;$file&#x22; ]; then\n    upload_output=$(/opt/homebrew/bin/cld uploader upload &#x22;$file&#x22; use_filename=true unique_filename=false 2>&#x26;1)\n\n    if [ $? -eq 0 ]; then\n      url=$(echo &#x22;$upload_output&#x22; | /opt/homebrew/bin/jq -r &#x27;.url&#x27; 2>/dev/null)\n      if [ -n &#x22;$url&#x22; ]; then\n        echo &#x22;$url&#x22; | pbcopy\n        osascript -e &#x22;display notification \\&#x22;Uploaded $file to Cloudinary and URL copied to clipboard: $url\\&#x22; with title \\&#x22;Screenshot Upload\\&#x22;&#x22;\n      fi\n    fi\n  fi\ndone\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>\n<p class=\"\">Key detail: the URL gets copied to my clipboard automatically, so I can immediately paste it into Slack or wherever I need it.</p>\n<h3 class=\"\" id=\"act-iii-display--analytics\">Act III: Display &#x26; Analytics</h3>\n<p class=\"\">Now for the fun part: turning this stream of photos into a web gallery that feels alive. The Nuxt frontend does some clever things to make browsing photos feel more like looking through a stack of prints than scrolling through a sterile grid.</p>\n<h4 class=\"\" id=\"the-cloudinary-api-endpoint\">The Cloudinary API Endpoint</h4>\n<p class=\"\">The heart of the system is a flexible Nuxt server API that can filter and fetch photos in different ways:</p>\n<figure class=\"relative rounded-lg overflow-hidden shadow-sm max-w-prose mx-auto\" data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#09090b;color:#cccac2\" tabindex=\"0\" data-language=\"ts\" data-theme=\"\"><code data-language=\"ts\" data-theme=\"\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">// server/api/cloudinary.ts</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">import</span><span style=\"color:#CCCAC2\"> { defineEventHandler</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> readBody } </span><span style=\"color:#FFAD66\">from</span><span style=\"color:#D5FF80\"> 'h3'</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">import</span><span style=\"color:#CCCAC2\"> { v2 </span><span style=\"color:#FFAD66\">as</span><span style=\"color:#CCCAC2\"> cloudinary } </span><span style=\"color:#FFAD66\">from</span><span style=\"color:#D5FF80\"> 'cloudinary'</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">export</span><span style=\"color:#FFAD66\"> default</span><span style=\"color:#FFD173\"> defineEventHandler</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#FFAD66\">async</span><span style=\"color:#CCCAC2\"> (</span><span style=\"color:#DFBFFF\">event</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#FFAD66\">=></span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> body </span><span style=\"color:#F29E74\">=</span><span style=\"color:#FFAD66\"> await</span><span style=\"color:#FFD173\"> readBody</span><span style=\"color:#CCCAC2\">(event)</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> numPhotos </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> Math</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">min</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#FFD173\">Number</span><span style=\"color:#CCCAC2\">(body</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">numPhotos) </span><span style=\"color:#F29E74\">||</span><span style=\"color:#DFBFFF\"> 100</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#DFBFFF\"> 500</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> onlyPhotoblog </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> body</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">onlyPhotoblog </span><span style=\"color:#F29E74\">??</span><span style=\"color:#DFBFFF\"> false</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> filterOutScreenshots </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> body</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">filterOutScreenshots </span><span style=\"color:#F29E74\">??</span><span style=\"color:#DFBFFF\"> true</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">  // Build search expression</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  let</span><span style=\"color:#CCCAC2\"> expression </span><span style=\"color:#F29E74\">=</span><span style=\"color:#D5FF80\"> 'resource_type:image'</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  if</span><span style=\"color:#CCCAC2\"> (onlyPhotoblog) expression </span><span style=\"color:#F29E74\">+=</span><span style=\"color:#D5FF80\"> ' AND tags=photo-blog'</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> result </span><span style=\"color:#F29E74\">=</span><span style=\"color:#FFAD66\"> await</span><span style=\"color:#CCCAC2\"> cloudinary</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">search</span></span>\n<span data-line=\"\"><span style=\"color:#F29E74\">    .</span><span style=\"color:#FFD173\">expression</span><span style=\"color:#CCCAC2\">(expression)</span></span>\n<span data-line=\"\"><span style=\"color:#F29E74\">    .</span><span style=\"color:#FFD173\">sort_by</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#D5FF80\">'created_at'</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#D5FF80\"> 'desc'</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#F29E74\">    .</span><span style=\"color:#FFD173\">max_results</span><span style=\"color:#CCCAC2\">(numPhotos)</span></span>\n<span data-line=\"\"><span style=\"color:#F29E74\">    .</span><span style=\"color:#FFD173\">with_field</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#D5FF80\">'tags,context'</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#F29E74\">    .</span><span style=\"color:#FFD173\">execute</span><span style=\"color:#CCCAC2\">()</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">  // Client-side screenshot filtering for complex patterns</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#FFD173\"> isScreenshot</span><span style=\"color:#F29E74\"> =</span><span style=\"color:#CCCAC2\"> (</span><span style=\"color:#DFBFFF\">resource</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#FFAD66\">=></span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    const</span><span style=\"color:#CCCAC2\"> tags </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> resource</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">tags </span><span style=\"color:#F29E74\">||</span><span style=\"color:#CCCAC2\"> []</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    const</span><span style=\"color:#CCCAC2\"> publicId </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> resource</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">public_id</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">toLowerCase</span><span style=\"color:#CCCAC2\">()</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    return</span><span style=\"color:#CCCAC2\"> (</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      tags</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">includes</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#D5FF80\">'screenshot'</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#F29E74\">||</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      publicId</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">includes</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#D5FF80\">'screenshot'</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#F29E74\">||</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      publicId</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">startsWith</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#D5FF80\">'screenshots/'</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    )</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  let</span><span style=\"color:#CCCAC2\"> filteredResources </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> result</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">resources</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  if</span><span style=\"color:#CCCAC2\"> (filterOutScreenshots) {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    filteredResources </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> result</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">resources</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">filter</span><span style=\"color:#CCCAC2\">(</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      (</span><span style=\"color:#DFBFFF\">resource</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#FFAD66\">=></span><span style=\"color:#F29E74\"> !</span><span style=\"color:#FFD173\">isScreenshot</span><span style=\"color:#CCCAC2\">(resource)</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    )</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  return</span><span style=\"color:#CCCAC2\"> filteredResources</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">map</span><span style=\"color:#CCCAC2\">((</span><span style=\"color:#DFBFFF\">resource</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#FFAD66\">=></span><span style=\"color:#CCCAC2\"> ({</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    public_id</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> resource</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">public_id</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    secure_url</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> resource</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">secure_url</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    created_at</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> resource</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">created_at</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    tags</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> resource</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">tags</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    width</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> resource</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">width</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    height</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> resource</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">height</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  }))</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">})</span></span><button type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"// server/api/cloudinary.ts\nimport { defineEventHandler, readBody } from &#x27;h3&#x27;\nimport { v2 as cloudinary } from &#x27;cloudinary&#x27;\n\nexport default defineEventHandler(async (event) => {\n  const body = await readBody(event)\n  const numPhotos = Math.min(Number(body.numPhotos) || 100, 500)\n  const onlyPhotoblog = body.onlyPhotoblog ?? false\n  const filterOutScreenshots = body.filterOutScreenshots ?? true\n\n  // Build search expression\n  let expression = &#x27;resource_type:image&#x27;\n  if (onlyPhotoblog) expression += &#x27; AND tags=photo-blog&#x27;\n\n  const result = await cloudinary.search\n    .expression(expression)\n    .sort_by(&#x27;created_at&#x27;, &#x27;desc&#x27;)\n    .max_results(numPhotos)\n    .with_field(&#x27;tags,context&#x27;)\n    .execute()\n\n  // Client-side screenshot filtering for complex patterns\n  const isScreenshot = (resource) => {\n    const tags = resource.tags || []\n    const publicId = resource.public_id.toLowerCase()\n\n    return (\n      tags.includes(&#x27;screenshot&#x27;) ||\n      publicId.includes(&#x27;screenshot&#x27;) ||\n      publicId.startsWith(&#x27;screenshots/&#x27;)\n    )\n  }\n\n  let filteredResources = result.resources\n  if (filterOutScreenshots) {\n    filteredResources = result.resources.filter(\n      (resource) => !isScreenshot(resource)\n    )\n  }\n\n  return filteredResources.map((resource) => ({\n    public_id: resource.public_id,\n    secure_url: resource.secure_url,\n    created_at: resource.created_at,\n    tags: resource.tags,\n    width: resource.width,\n    height: resource.height,\n  }))\n})\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>\n<h4 class=\"\" id=\"randomized-photo-layout\">Randomized Photo Layout</h4>\n<p class=\"\">The gallery's signature feature is making photos look like they were casually thrown on a table. Each photo gets random rotation, translation, and scale:</p>\n<figure class=\"relative rounded-lg overflow-hidden shadow-sm max-w-prose mx-auto\" data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#09090b;color:#cccac2\" tabindex=\"0\" data-language=\"js\" data-theme=\"\"><code data-language=\"js\" data-theme=\"\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#FFAD66\">function</span><span style=\"color:#FFD173\"> randomizedPhotoStyle</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#DFBFFF\">photo</span><span style=\"color:#CCCAC2\">) {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> chance </span><span style=\"color:#F29E74\">=</span><span style=\"color:#F29E74\"> new</span><span style=\"color:#FFD173\"> Chance</span><span style=\"color:#CCCAC2\">()</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> maxOffsetY </span><span style=\"color:#F29E74\">=</span><span style=\"color:#DFBFFF\"> 6</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> maxOffsetX </span><span style=\"color:#F29E74\">=</span><span style=\"color:#DFBFFF\"> 2</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> maxAngle </span><span style=\"color:#F29E74\">=</span><span style=\"color:#DFBFFF\"> 1.5</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> randomAngle </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> chance</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">integer</span><span style=\"color:#CCCAC2\">({ min</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#F29E74\"> -</span><span style=\"color:#CCCAC2\">maxAngle</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> max</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> maxAngle })</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> randomX </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> chance</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">floating</span><span style=\"color:#CCCAC2\">({ min</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#F29E74\"> -</span><span style=\"color:#CCCAC2\">maxOffsetX</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> max</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> maxOffsetX })</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> randomY </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> chance</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">floating</span><span style=\"color:#CCCAC2\">({ min</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#F29E74\"> -</span><span style=\"color:#CCCAC2\">maxOffsetY</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> max</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> maxOffsetY })</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> scale </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> chance</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">floating</span><span style=\"color:#CCCAC2\">({ min</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#DFBFFF\"> 0.89</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> max</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#DFBFFF\"> 1</span><span style=\"color:#CCCAC2\"> })</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">  // 33% of the time, keep it normal</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  if</span><span style=\"color:#CCCAC2\"> (chance</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">bool</span><span style=\"color:#CCCAC2\">({ likelihood</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#DFBFFF\"> 0.333</span><span style=\"color:#CCCAC2\"> })) </span><span style=\"color:#FFAD66\">return</span><span style=\"color:#CCCAC2\"> {}</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  return</span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    transform</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#D5FF80\"> `translate(</span><span style=\"color:#FFAD66\">${</span><span style=\"color:#CCCAC2\">randomX</span><span style=\"color:#FFAD66\">}</span><span style=\"color:#D5FF80\">px, </span><span style=\"color:#FFAD66\">${</span><span style=\"color:#CCCAC2\">randomY</span><span style=\"color:#FFAD66\">}</span><span style=\"color:#D5FF80\">px) rotate(</span><span style=\"color:#FFAD66\">${</span><span style=\"color:#CCCAC2\">randomAngle</span><span style=\"color:#FFAD66\">}</span><span style=\"color:#D5FF80\">deg) scale(</span><span style=\"color:#FFAD66\">${</span><span style=\"color:#CCCAC2\">scale</span><span style=\"color:#FFAD66\">}</span><span style=\"color:#D5FF80\">)`</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  }</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">}</span></span><button type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"function randomizedPhotoStyle(photo) {\n  const chance = new Chance()\n\n  const maxOffsetY = 6\n  const maxOffsetX = 2\n  const maxAngle = 1.5\n\n  const randomAngle = chance.integer({ min: -maxAngle, max: maxAngle })\n  const randomX = chance.floating({ min: -maxOffsetX, max: maxOffsetX })\n  const randomY = chance.floating({ min: -maxOffsetY, max: maxOffsetY })\n  const scale = chance.floating({ min: 0.89, max: 1 })\n\n  // 33% of the time, keep it normal\n  if (chance.bool({ likelihood: 0.333 })) return {}\n\n  return {\n    transform: &#x60;translate(${randomX}px, ${randomY}px) rotate(${randomAngle}deg) scale(${scale})&#x60;,\n  }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>\n<h4 class=\"\" id=\"deep-exif-analytics\">Deep EXIF Analytics</h4>\n<p class=\"\">The <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">/api/stats</code> endpoint does something special: it fetches EXIF data for every photo and builds comprehensive analytics about shooting habits:</p>\n<figure class=\"relative rounded-lg overflow-hidden shadow-sm max-w-prose mx-auto\" data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#09090b;color:#cccac2\" tabindex=\"0\" data-language=\"ts\" data-theme=\"\"><code data-language=\"ts\" data-theme=\"\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">// server/api/stats.ts</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">export</span><span style=\"color:#FFAD66\"> default</span><span style=\"color:#FFD173\"> defineEventHandler</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#FFAD66\">async</span><span style=\"color:#CCCAC2\"> (</span><span style=\"color:#DFBFFF\">event</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#FFAD66\">=></span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">  // Fetch all photo-blog photos</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> photos </span><span style=\"color:#F29E74\">=</span><span style=\"color:#FFAD66\"> await</span><span style=\"color:#FFD173\"> $fetch</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#D5FF80\">\"/api/cloudinary\"</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    method</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#D5FF80\"> \"POST\"</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    body</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> { numPhotos</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#DFBFFF\"> 1000</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> onlyPhotoblog</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#DFBFFF\"> true</span><span style=\"color:#CCCAC2\"> }</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  })</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">  // Get EXIF data for each photo</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> exifPromises </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> photos</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">map</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#DFBFFF\">photo</span><span style=\"color:#FFAD66\"> =></span></span>\n<span data-line=\"\"><span style=\"color:#FFD173\">    $fetch</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#D5FF80\">\"/api/cloudinary-exif\"</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      method</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#D5FF80\"> \"POST\"</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      body</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> { publicId</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> photo</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">public_id }</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    })</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">catch</span><span style=\"color:#CCCAC2\">(() </span><span style=\"color:#FFAD66\">=></span><span style=\"color:#DFBFFF\"> null</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  )</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> exifResults </span><span style=\"color:#F29E74\">=</span><span style=\"color:#FFAD66\"> await</span><span style=\"color:#5CCFE6\"> Promise</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">all</span><span style=\"color:#CCCAC2\">(exifPromises)</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">  // Filter to only real photos (have camera Make/Model in EXIF)</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> photosWithExif </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> photos</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">filter</span><span style=\"color:#CCCAC2\">((</span><span style=\"color:#DFBFFF\">photo</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#DFBFFF\"> index</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#FFAD66\">=></span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    const</span><span style=\"color:#CCCAC2\"> exif </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> exifResults[index]</span><span style=\"color:#F29E74\">?.</span><span style=\"color:#CCCAC2\">exifData</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    return</span><span style=\"color:#CCCAC2\"> exif</span><span style=\"color:#F29E74\">?.</span><span style=\"color:#CCCAC2\">Make </span><span style=\"color:#F29E74\">&#x26;&#x26;</span><span style=\"color:#CCCAC2\"> exif</span><span style=\"color:#F29E74\">?.</span><span style=\"color:#CCCAC2\">Model</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  })</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">  // Build gear stats</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> cameras </span><span style=\"color:#F29E74\">=</span><span style=\"color:#F29E74\"> new</span><span style=\"color:#FFD173\"> Map</span><span style=\"color:#CCCAC2\">()</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> lenses </span><span style=\"color:#F29E74\">=</span><span style=\"color:#F29E74\"> new</span><span style=\"color:#FFD173\"> Map</span><span style=\"color:#CCCAC2\">()</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> apertures </span><span style=\"color:#F29E74\">=</span><span style=\"color:#F29E74\"> new</span><span style=\"color:#FFD173\"> Map</span><span style=\"color:#CCCAC2\">()</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> shutterSpeeds </span><span style=\"color:#F29E74\">=</span><span style=\"color:#F29E74\"> new</span><span style=\"color:#FFD173\"> Map</span><span style=\"color:#CCCAC2\">()</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> isoValues </span><span style=\"color:#F29E74\">=</span><span style=\"color:#F29E74\"> new</span><span style=\"color:#FFD173\"> Map</span><span style=\"color:#CCCAC2\">()</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  exifResults</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">forEach</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#DFBFFF\">result</span><span style=\"color:#FFAD66\"> =></span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> (</span><span style=\"color:#F29E74\">!</span><span style=\"color:#CCCAC2\">result</span><span style=\"color:#F29E74\">?.</span><span style=\"color:#CCCAC2\">exifData) </span><span style=\"color:#FFAD66\">return</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    const</span><span style=\"color:#CCCAC2\"> exif </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> result</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">exifData</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    const</span><span style=\"color:#CCCAC2\"> hr </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> result</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">humanReadableExifData</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">    // Track camera usage</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> (exif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">Make </span><span style=\"color:#F29E74\">&#x26;&#x26;</span><span style=\"color:#CCCAC2\"> exif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">Model) {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">      const</span><span style=\"color:#CCCAC2\"> camera </span><span style=\"color:#F29E74\">=</span><span style=\"color:#D5FF80\"> `</span><span style=\"color:#FFAD66\">${</span><span style=\"color:#CCCAC2\">exif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">Make</span><span style=\"color:#FFAD66\">}</span><span style=\"color:#FFAD66\"> ${</span><span style=\"color:#CCCAC2\">exif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">Model</span><span style=\"color:#FFAD66\">}</span><span style=\"color:#D5FF80\">`</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      cameras</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">set</span><span style=\"color:#CCCAC2\">(camera</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> (cameras</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">get</span><span style=\"color:#CCCAC2\">(camera) </span><span style=\"color:#F29E74\">||</span><span style=\"color:#DFBFFF\"> 0</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#F29E74\">+</span><span style=\"color:#DFBFFF\"> 1</span><span style=\"color:#CCCAC2\">)</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">    // Track lens usage</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> (exif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">LensModel) {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      lenses</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">set</span><span style=\"color:#CCCAC2\">(exif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">LensModel</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> (lenses</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">get</span><span style=\"color:#CCCAC2\">(exif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">LensModel) </span><span style=\"color:#F29E74\">||</span><span style=\"color:#DFBFFF\"> 0</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#F29E74\">+</span><span style=\"color:#DFBFFF\"> 1</span><span style=\"color:#CCCAC2\">)</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B8CFE680;font-style:italic\">    // Track camera settings</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> (hr</span><span style=\"color:#F29E74\">?.</span><span style=\"color:#CCCAC2\">aperture) apertures</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">set</span><span style=\"color:#CCCAC2\">(hr</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">aperture</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> (apertures</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">get</span><span style=\"color:#CCCAC2\">(hr</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">aperture) </span><span style=\"color:#F29E74\">||</span><span style=\"color:#DFBFFF\"> 0</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#F29E74\">+</span><span style=\"color:#DFBFFF\"> 1</span><span style=\"color:#CCCAC2\">)</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> (hr</span><span style=\"color:#F29E74\">?.</span><span style=\"color:#CCCAC2\">exposure) shutterSpeeds</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">set</span><span style=\"color:#CCCAC2\">(hr</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">exposure</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> (shutterSpeeds</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">get</span><span style=\"color:#CCCAC2\">(hr</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">exposure) </span><span style=\"color:#F29E74\">||</span><span style=\"color:#DFBFFF\"> 0</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#F29E74\">+</span><span style=\"color:#DFBFFF\"> 1</span><span style=\"color:#CCCAC2\">)</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> (exif</span><span style=\"color:#F29E74\">?.</span><span style=\"color:#CCCAC2\">PhotographicSensitivity) isoValues</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">set</span><span style=\"color:#CCCAC2\">(exif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">PhotographicSensitivity</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#CCCAC2\"> (isoValues</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">get</span><span style=\"color:#CCCAC2\">(exif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">PhotographicSensitivity) </span><span style=\"color:#F29E74\">||</span><span style=\"color:#DFBFFF\"> 0</span><span style=\"color:#CCCAC2\">) </span><span style=\"color:#F29E74\">+</span><span style=\"color:#DFBFFF\"> 1</span><span style=\"color:#CCCAC2\">)</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  })</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  return</span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    stats</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      totalPhotos</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> photosWithExif</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">length</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      photosThisYear</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#B8CFE680;font-style:italic\"> /* calculate */</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      photosThisMonth</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#B8CFE680;font-style:italic\"> /* calculate */</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    }</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    gearStats</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      cameras</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#FFD173\"> formatGearStats</span><span style=\"color:#CCCAC2\">(cameras)</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      lenses</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#FFD173\"> formatGearStats</span><span style=\"color:#CCCAC2\">(lenses)</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      mostUsedSettings</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#CCCAC2\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">        apertures</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#FFD173\"> formatSettingStats</span><span style=\"color:#CCCAC2\">(apertures)</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">        shutterSpeeds</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#FFD173\"> formatSettingStats</span><span style=\"color:#CCCAC2\">(shutterSpeeds)</span><span style=\"color:#CCCAC2B3\">,</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">        isoValues</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#FFD173\"> formatSettingStats</span><span style=\"color:#CCCAC2\">(isoValues)</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      }</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    }</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  }</span><span style=\"color:#CCCAC2B3\">;</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">})</span><span style=\"color:#CCCAC2B3\">;</span></span><button type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"// server/api/stats.ts\nexport default defineEventHandler(async (event) => {\n  // Fetch all photo-blog photos\n  const photos = await $fetch(&#x22;/api/cloudinary&#x22;, {\n    method: &#x22;POST&#x22;,\n    body: { numPhotos: 1000, onlyPhotoblog: true }\n  });\n\n  // Get EXIF data for each photo\n  const exifPromises = photos.map(photo =>\n    $fetch(&#x22;/api/cloudinary-exif&#x22;, {\n      method: &#x22;POST&#x22;,\n      body: { publicId: photo.public_id }\n    }).catch(() => null)\n  );\n\n  const exifResults = await Promise.all(exifPromises);\n\n  // Filter to only real photos (have camera Make/Model in EXIF)\n  const photosWithExif = photos.filter((photo, index) => {\n    const exif = exifResults[index]?.exifData;\n    return exif?.Make &#x26;&#x26; exif?.Model;\n  });\n\n  // Build gear stats\n  const cameras = new Map();\n  const lenses = new Map();\n  const apertures = new Map();\n  const shutterSpeeds = new Map();\n  const isoValues = new Map();\n\n  exifResults.forEach(result => {\n    if (!result?.exifData) return;\n\n    const exif = result.exifData;\n    const hr = result.humanReadableExifData;\n\n    // Track camera usage\n    if (exif.Make &#x26;&#x26; exif.Model) {\n      const camera = &#x60;${exif.Make} ${exif.Model}&#x60;;\n      cameras.set(camera, (cameras.get(camera) || 0) + 1);\n    }\n\n    // Track lens usage\n    if (exif.LensModel) {\n      lenses.set(exif.LensModel, (lenses.get(exif.LensModel) || 0) + 1);\n    }\n\n    // Track camera settings\n    if (hr?.aperture) apertures.set(hr.aperture, (apertures.get(hr.aperture) || 0) + 1);\n    if (hr?.exposure) shutterSpeeds.set(hr.exposure, (shutterSpeeds.get(hr.exposure) || 0) + 1);\n    if (exif?.PhotographicSensitivity) isoValues.set(exif.PhotographicSensitivity, (isoValues.get(exif.PhotographicSensitivity) || 0) + 1);\n  });\n\n  return {\n    stats: {\n      totalPhotos: photosWithExif.length,\n      photosThisYear: /* calculate */,\n      photosThisMonth: /* calculate */\n    },\n    gearStats: {\n      cameras: formatGearStats(cameras),\n      lenses: formatGearStats(lenses),\n      mostUsedSettings: {\n        apertures: formatSettingStats(apertures),\n        shutterSpeeds: formatSettingStats(shutterSpeeds),\n        isoValues: formatSettingStats(isoValues)\n      }\n    }\n  };\n});\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>\n<p class=\"\">This creates a stats page that shows not just what photos I've taken, but deep insights into my shooting habits: which cameras I use most, favorite apertures, time of day patterns, etc.</p>\n<h4 class=\"\" id=\"keyboard-navigation\">Keyboard Navigation</h4>\n<p class=\"\">The gallery supports arrow key navigation to flip through photos like a slideshow:</p>\n<figure class=\"relative rounded-lg overflow-hidden shadow-sm max-w-prose mx-auto\" data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#09090b;color:#cccac2\" tabindex=\"0\" data-language=\"js\" data-theme=\"\"><code data-language=\"js\" data-theme=\"\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#FFAD66\">function</span><span style=\"color:#FFD173\"> handleKeyDown</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#DFBFFF\">e</span><span style=\"color:#CCCAC2\">) {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  if</span><span style=\"color:#CCCAC2\"> (e</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">key </span><span style=\"color:#F29E74\">===</span><span style=\"color:#D5FF80\"> 'ArrowRight'</span><span style=\"color:#F29E74\"> &#x26;&#x26;</span><span style=\"color:#CCCAC2\"> currentIndex</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">value </span><span style=\"color:#F29E74\">&#x3C;</span><span style=\"color:#CCCAC2\"> photos</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">length </span><span style=\"color:#F29E74\">-</span><span style=\"color:#DFBFFF\"> 1</span><span style=\"color:#CCCAC2\">) {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    currentIndex</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">value</span><span style=\"color:#F29E74\">++</span></span>\n<span data-line=\"\"><span style=\"color:#FFD173\">    scrollToCurrentPhoto</span><span style=\"color:#CCCAC2\">()</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  } </span><span style=\"color:#FFAD66\">else</span><span style=\"color:#FFAD66\"> if</span><span style=\"color:#CCCAC2\"> (e</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">key </span><span style=\"color:#F29E74\">===</span><span style=\"color:#D5FF80\"> 'ArrowLeft'</span><span style=\"color:#F29E74\"> &#x26;&#x26;</span><span style=\"color:#CCCAC2\"> currentIndex</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">value </span><span style=\"color:#F29E74\">></span><span style=\"color:#DFBFFF\"> 0</span><span style=\"color:#CCCAC2\">) {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    currentIndex</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">value</span><span style=\"color:#F29E74\">--</span></span>\n<span data-line=\"\"><span style=\"color:#FFD173\">    scrollToCurrentPhoto</span><span style=\"color:#CCCAC2\">()</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  }</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">}</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">function</span><span style=\"color:#FFD173\"> scrollToCurrentPhoto</span><span style=\"color:#CCCAC2\">() {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  const</span><span style=\"color:#CCCAC2\"> el </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> photoRef</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">value[currentIndex</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">value]</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">  if</span><span style=\"color:#CCCAC2\"> (el) {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    const</span><span style=\"color:#CCCAC2\"> currentPhoto </span><span style=\"color:#F29E74\">=</span><span style=\"color:#CCCAC2\"> photos</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">value[currentIndex</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">value]</span></span>\n<span data-line=\"\"><span style=\"color:#FFAD66\">    if</span><span style=\"color:#CCCAC2\"> (currentPhoto</span><span style=\"color:#F29E74\">?.</span><span style=\"color:#CCCAC2\">public_id) {</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">      window</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">history</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">replaceState</span><span style=\"color:#CCCAC2\">(</span><span style=\"color:#DFBFFF\">null</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#D5FF80\"> ''</span><span style=\"color:#CCCAC2B3\">,</span><span style=\"color:#D5FF80\"> `#photo-</span><span style=\"color:#FFAD66\">${</span><span style=\"color:#CCCAC2\">currentPhoto</span><span style=\"color:#F29E74\">.</span><span style=\"color:#CCCAC2\">public_id</span><span style=\"color:#FFAD66\">}</span><span style=\"color:#D5FF80\">`</span><span style=\"color:#CCCAC2\">)</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    }</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">    el</span><span style=\"color:#F29E74\">.</span><span style=\"color:#FFD173\">scrollIntoView</span><span style=\"color:#CCCAC2\">({ behavior</span><span style=\"color:#CCCAC2B3\">:</span><span style=\"color:#D5FF80\"> 'smooth'</span><span style=\"color:#CCCAC2\"> })</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">  }</span></span>\n<span data-line=\"\"><span style=\"color:#CCCAC2\">}</span></span><button type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"function handleKeyDown(e) {\n  if (e.key === &#x27;ArrowRight&#x27; &#x26;&#x26; currentIndex.value < photos.length - 1) {\n    currentIndex.value++\n    scrollToCurrentPhoto()\n  } else if (e.key === &#x27;ArrowLeft&#x27; &#x26;&#x26; currentIndex.value > 0) {\n    currentIndex.value--\n    scrollToCurrentPhoto()\n  }\n}\n\nfunction scrollToCurrentPhoto() {\n  const el = photoRef.value[currentIndex.value]\n  if (el) {\n    const currentPhoto = photos.value[currentIndex.value]\n    if (currentPhoto?.public_id) {\n      window.history.replaceState(null, &#x27;&#x27;, &#x60;#photo-${currentPhoto.public_id}&#x60;)\n    }\n    el.scrollIntoView({ behavior: &#x27;smooth&#x27; })\n  }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>\n<h3 class=\"\" id=\"the-philosophy-augment-dont-replace\">The Philosophy: Augment, Don't Replace</h3>\n<p class=\"\">The key insight running through this whole system: don't rebuild what already works well.</p>\n<ul class=\"list-disc\">\n<li class=\"\">Mac's Finder is an excellent file browser â†’ augment it with color tags and Automator actions</li>\n<li class=\"\">Cloudinary is an excellent CDN â†’ use it as both storage and CMS via their API</li>\n<li class=\"\">Browser scroll and keyboard navigation work well â†’ enhance them with smooth animations and hash updates</li>\n</ul>\n<p class=\"\">The result is a photography workflow that feels invisible when it works, and produces a web gallery that feels more human than the usual sterile grid layouts.</p>\n<p class=\"\">Every photo goes from SD card to web automatically, but with deliberate curation steps (the green tagging) that keep the quality high. And the analytics provide insights into my shooting habits that I'd never get from just scrolling through folders.</p>\n<p class=\"\">The whole system embodies \"make hell fun\" - turning the tedious work of photo management into a series of small, satisfying automations that compound into something powerful.</p>\n<h3 class=\"\" id=\"why-this-approach-works\">Why This Approach Works</h3>\n<p class=\"\">I'm big on using macOS built-in file management as my \"CMS\" for photos, rather than Lightroom or any of that proprietary bullshit. Finder as filesystem, Preview as image editor - this is how we're supposed to use computers.</p>\n<p class=\"\">The key benefits:</p>\n<ul class=\"list-disc\">\n<li class=\"\"><strong class=\"\">No vendor lock-in</strong>: My photos are just flat files with standard metadata, not trapped in some proprietary catalog</li>\n<li class=\"\"><strong class=\"\">Fast and lightweight</strong>: No waiting for Lightroom to boot up or process thumbnails - Finder and Preview are instant</li>\n<li class=\"\"><strong class=\"\">Future-proof</strong>: Will work with any tool, any OS, decades from now</li>\n<li class=\"\"><strong class=\"\">Free</strong>: No monthly subscriptions to access my own photos</li>\n<li class=\"\"><strong class=\"\">Scriptable</strong>: Standard Unix tools work with everything</li>\n</ul>\n<p class=\"\">When you use Finder's color tags, you're using the filesystem itself as a database. When you use <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">mdfind</code> to search for green-tagged files, you're querying that database directly. No intermediary layer, no proprietary formats, no bullshit.</p>\n<p class=\"\">Preview handles 90% of what photographers actually need: crop, rotate, color correction, levels. For the other 10%, you can always open in something more specialized, but the original stays a standard file.</p>\n<p class=\"\">This is computational thinking applied to photography: build small, composable tools that work together rather than one giant monolithic application that tries to do everything. The filesystem is the database, the OS is the interface layer, Cloudinary is the CDN, and Nuxt is the presentation layer.</p>\n<p class=\"\">Each piece can be swapped out without breaking the whole system. That's how you build something that lasts.</p>\n<h3 class=\"\" id=\"the-magic-of-custom-features\">The Magic of Custom Features</h3>\n<p class=\"\">One of the best parts about building your own photo gallery instead of using a Squarespace template or Instagram feed is the ability to add delightful, weird features that no template would ever include.</p>\n<h4 class=\"\" id=\"randomized-thrown-on-a-table-layout\">Randomized \"Thrown on a Table\" Layout</h4>\n<p class=\"\">The randomized photo positioning isn't just aesthetic - it makes every visit feel slightly different. Photos get subtle random rotations, translations, and scaling that make them feel like physical prints scattered on a desk. Some photos stay perfectly aligned (33% chance), others get the treatment. It's controlled chaos that feels human.</p>\n<h4 class=\"\" id=\"deep-photography-analytics\">Deep Photography Analytics</h4>\n<p class=\"\">The <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">/stats</code> page is something you'd never get from a standard gallery template. It processes EXIF data from thousands of photos to reveal patterns:</p>\n<ul class=\"list-disc\">\n<li class=\"\">Which cameras and lenses you actually use (vs. what you think you use)</li>\n<li class=\"\">Your favorite apertures and shutter speeds</li>\n<li class=\"\">Time of day shooting patterns</li>\n<li class=\"\">Photo streaks and seasonal trends</li>\n<li class=\"\">Gear usage percentages down to the decimal</li>\n</ul>\n<p class=\"\">This kind of meta-analysis turns your photography practice into quantified self data. I can see that I shoot 67% of my photos with my 35mm lens, or that I heavily favor f/2.8 for street photography.</p>\n<h4 class=\"\" id=\"keyboard-navigation-with-url-state\">Keyboard Navigation with URL State</h4>\n<p class=\"\">Arrow keys flip through photos like a slideshow, and each photo updates the browser hash so you can bookmark specific images or share direct links. The smooth scrolling and state management makes browsing feel like a native app rather than a clunky webpage.</p>\n<h4 class=\"\" id=\"smart-screenshot-handling\">Smart Screenshot Handling</h4>\n<p class=\"\">Screenshots and real photos get processed differently. Screenshots auto-upload to Cloudinary with URLs copied to clipboard (perfect for Slack), while camera photos go through the green-tag curation flow. The system knows the difference through EXIF detection - if it has camera Make/Model data, it's a real photo.</p>\n<h4 class=\"\" id=\"session-persistence\">Session Persistence</h4>\n<p class=\"\">When you click into a detailed photo view and then navigate back, the gallery remembers exactly where you were scrolling. No losing your place in a long feed of photos - the system restores both scroll position and active photo state.</p>\n<h4 class=\"\" id=\"chancejs-seeded-randomization\">Chance.js Seeded Randomization</h4>\n<p class=\"\">The photo randomization uses Chance.js with the photo's public_id as a seed, so each photo always gets the same \"random\" positioning. This means the layout is consistent across visits while still feeling organic and hand-placed.</p>\n<h4 class=\"\" id=\"fade-in-intersection-observers\">Fade-in Intersection Observers</h4>\n<p class=\"\">Photos fade in as they enter the viewport using Intersection Observer API, creating a smooth progressive loading experience. Combined with the randomized positioning, it feels like photos are materializing on the table as you scroll.</p>\n<h4 class=\"\" id=\"mobile-first-responsive-design\">Mobile-First Responsive Design</h4>\n<p class=\"\">The layout adapts elegantly from desktop (where you can see the random positioning clearly) to mobile (where photos stack more traditionally but keep subtle rotation). The keyboard navigation switches to touch-friendly swipe gestures.</p>\n<h4 class=\"\" id=\"custom-typography-and-spacing\">Custom Typography and Spacing</h4>\n<p class=\"\">Typography uses a mix of <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">font-fjalla</code> for large numbers and <code class=\"font-mono text-sm bg-zinc-100 dark:bg-zinc-800 rounded px-1.5 py-0.5\">font-mono</code> for technical details, creating a design system that feels both technical and human. The spacing is carefully tuned so photos feel like they're floating rather than trapped in a rigid grid.</p>\n<p class=\"\">These are the kinds of details that make a custom-built site feel alive compared to the sterile perfection of template galleries. Every interaction has been considered, every animation has meaning, and the whole experience reflects how I actually want to browse and share photos.</p>\n<p class=\"\">You can't get this level of customization from Squarespace or Instagram. This is what happens when you own the entire stack and can make it behave exactly how you want.</p>",
  "title": "Building a Photo Gallery That Feels Like Throwing Pictures on a Table",
  "metadata": {
    "draft": false,
    "dek": "In which we build a photography workflow that turns Finder tags into a web gallery, complete with EXIF analytics and randomized layouts that make your photos look like they were thrown on a table",
    "inprogress": false,
    "date": "2022-12-05T23:34:09.000Z",
    "modified": "2025-10-25T16:49:49.000Z",
    "tags": [
      "automation",
      "photography",
      "nuxt",
      "cloudinary",
      "workflow"
    ],
    "words": 2535,
    "images": 0,
    "imageDetails": {
      "total": 0,
      "cloudinary": 0,
      "withDimensions": 0
    },
    "links": 2,
    "codeBlocks": 8,
    "headers": {
      "h2": 1
    },
    "toc": [
      {
        "text": "Building a Photo Gallery That Feels Like Throwing Pictures on a Table",
        "slug": "building-a-photo-gallery-that-feels-like-throwing-pictures-on-a-table",
        "level": "h2",
        "children": [
          {
            "text": "The Three-Act Structure",
            "slug": "the-three-act-structure",
            "level": "h3",
            "children": []
          },
          {
            "text": "Act I: Import & Organize",
            "slug": "act-i-import--organize",
            "level": "h3",
            "children": []
          },
          {
            "text": "Act II: Curate & Upload",
            "slug": "act-ii-curate--upload",
            "level": "h3",
            "children": []
          },
          {
            "text": "Act III: Display & Analytics",
            "slug": "act-iii-display--analytics",
            "level": "h3",
            "children": []
          },
          {
            "text": "The Philosophy: Augment, Don't Replace",
            "slug": "the-philosophy-augment-dont-replace",
            "level": "h3",
            "children": []
          },
          {
            "text": "Why This Approach Works",
            "slug": "why-this-approach-works",
            "level": "h3",
            "children": []
          },
          {
            "text": "The Magic of Custom Features",
            "slug": "the-magic-of-custom-features",
            "level": "h3",
            "children": []
          }
        ]
      }
    ],
    "type": "post",
    "sourcePath": "../../../../../code/website2/content/blog/drafts/_stale/photoblog-with-cloudinary-nuxt.md",
    "sourceDir": "/Users/ejfox/Library/Mobile Documents/iCloud~md~obsidian/Documents/ejfox/"
  }
}