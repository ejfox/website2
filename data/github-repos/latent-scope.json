{
  "name": "latent-scope",
  "description": "A scientific instrument for investigating latent spaces",
  "url": "https://github.com/ejfox/latent-scope",
  "homepage": null,
  "stats": {
    "stars": 0,
    "forks": 0,
    "watchers": 0,
    "openIssues": 0
  },
  "language": "JavaScript",
  "languageColor": "#f1e05a",
  "topics": [],
  "readme": {
    "html": "<h1 id=\"latent-scope\">Latent Scope</h1>\n<p>Quickly embed, project, cluster and explore a dataset. This project is a new kind of workflow + tool for visualizing and exploring datasets through the lens of latent spaces.\n<a href=\"https://enjalot.github.io/latent-scope/#/datasets/dadabase/explore/scopes-007\"><img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/dadabase-explore.png?raw=true\" height=\"480px\" alt=\"Example exploration\" /></a></p>\n<p>The power of machine learning models to encode unstructured data into high-dimensional embeddings is relatively under-explored. Retrieval Augmented Generation has taken off as a popular usecase for embeddings, but do you feel confident in your understanding of why certain data is being retrieved? Do you have a clear picture of what all is in your dataset? Latentscope is like a microscope that allows you to get a new perspective on what's happening to your data when it's embedded. You can try similarity search with different embeddings, peruse automatically labeled clusters and zoom in on individual data points all while keeping the context of your entire dataset.</p>\n<h3 id=\"demo\">Demo</h3>\n<p>This tool is meant to be run locally or on a trusted server to process data for viewing in the latent scope. You can see the result of the process in a read-only <a href=\"https://enjalot.github.io/latent-scope\">live demo</a>:</p>\n<ul>\n<li><a href=\"https://enjalot.github.io/latent-scope/#/datasets/datavis-misunderstood/explore/scopes-001\">datavis survey responses</a> - 700 survey responses</li>\n<li><a href=\"https://enjalot.github.io/latent-scope/#/datasets/dolly15k/explore/scopes-001\">Dolly 15k</a> - 15k instructions</li>\n<li><a href=\"https://enjalot.github.io/latent-scope/#/datasets/dadabase/explore/scopes-004\">r/DadJokes</a> - 50k dad jokes</li>\n<li><a href=\"https://enjalot.github.io/latent-scope/#/datasets/emotion/explore/scopes-001\">emotion</a> - 400k emotion statements from Twitter</li>\n</ul>\n<p>The source of each demo dataset is documented in the notebooks linked below. Each demo was chosen to represent different scales of data as well as some common usecases.</p>\n<p><a href=\"https://enjalot.github.io/latent-scope\"><img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/dadabase-scopes.png?raw=true\" width=\"100%\" alt=\"Dadabase demo scopes\" /></a></p>\n<h3 id=\"quick-start\">Quick Start</h3>\n<p>To get started, install the <a href=\"https://pypi.org/project/latentscope/\">latent-scope module</a> and run the server via the Command Line:</p>\n<pre><code class=\"language-bash\">python -m venv venv\nsource venv/bin/activate\npip install latent-scope\nls-serve ~/local-scope-data\n</code></pre>\n<p>Then open your browser to <a href=\"http://localhost:5001\">http://localhost:5001</a> and start processing your first dataset!<br />\n<img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/home.png?raw=true\" width=\"320px\" alt=\"Ingest\" />  <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/0-ingest.png?raw=true\" width=\"320px\" alt=\"Ingest\" /></p>\n<p>Once ingested, you will go through the following 6 steps: Embed, UMAP, Cluster, Label, Scope and Explore\n<img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/1-embed.png?raw=true\" width=\"320px\" alt=\"Embed\" /> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/2-umap.png?raw=true\" width=\"320px\" alt=\"UMAP\" /> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/3-cluster.png?raw=true\" width=\"320px\" alt=\"Cluster\" /> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/4-label.png?raw=true\" width=\"320px\" alt=\"Label\" /> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/5-scope.png?raw=true\" width=\"320px\" alt=\"Scope\" /> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/6-explore.png?raw=true\" width=\"320px\" alt=\"Scope\" /></p>\n<p>Each step focuses on the relevant choices to move you to the next step. For example choosing which embedding model you want to use to embed with, or the parameters for UMAP. It's very likely you may want to try several choices at each step, which is why the final step before \"Explore\" is to make a \"scope\". You can make multiple scopes, as seen in the <a href=\"https://enjalot.github.io/latent-scope/#/datasets/dadabase/explore/scopes-004\">dadabase example</a> to explore your data through different lenses (i.e. OpenAI embeddings vs. Jina v2).</p>\n<h3 id=\"python-interface\">Python interface</h3>\n<p>You can also ingest data from a Pandas dataframe using the Python interface:</p>\n<pre><code class=\"language-python\">from latentscope import ls\ndf = pd.read_parquet(\"...\")\nls.init(\"~/latent-scope-data\")\nls.ingest(\"dadabase\", df, text_column=\"joke\")\nls.serve()\n</code></pre>\n<p>See these notebooks for detailed examples of using the Python interface to prepare and load data.</p>\n<ul>\n<li><a href=\"notebooks/dvs-survey.ipynb\">dvs-survey</a> - A small test dataset of 700 rows to quickly illustrate the process. This notebook shows how you can do every step of the process with the Python interface.</li>\n<li><a href=\"notebooks/dadabase.ipynb\">dadabase</a> - A more interesting (and funny) dataset of 50k rows. This notebook shows how you can preprocess a dataset, ingest it into latentscope and then use the web interface to complete the process.</li>\n<li><a href=\"notebooks/dolly15k.ipynb\">dolly15k</a> - Grab data from HuggingFace datasets and ingest into the process.</li>\n<li><a href=\"notebooks/emotion.ipynb\">emotion</a> - 400k rows of emotional tweets.</li>\n</ul>\n<h3 id=\"command-line-quick-start\">Command line quick start</h3>\n<p>When latent-scope is installed, it creates a suite of command line scripts that can be used to setup the scopes for exploring in the web application. The output of each step in the process is flat files stored in the data directory specified at init. These files are in standard formats that were designed to be ported into other pipelines or interfaces.</p>\n<pre><code class=\"language-bash\"># like above, we make sure to install latent-scope\npython -m venv venv\nsource venv/bin/activate\npip install latent-scope\n\n# prepare some data\nwget \"https://storage.googleapis.com/fun-data/latent-scope/examples/dvs-survey/datavis-misunderstood.csv\" &gt; ~/Downloads/datavis-misunderstood.csv\n\nls-init \"~/latent-scope-data\"\n# ls-ingest dataset_id csv_path\nls-ingest-csv \"datavis-misunderstood\" \"~/Downloads/datavis-misunderstood.csv\"\n# get a list of model ids available (lists both embedding and chat models available)\nls-list-models\n# ls-embed dataset_id text_column model_id prefix\nls-embed datavis-misunderstood \"answer\" transformers-intfloat___e5-small-v2 \"\"\n# ls-umap dataset_id embedding_id n_neighbors min_dist\nls-umap datavis-misunderstood embedding-001 25 .1\n# ls-cluster dataset_id umap_id samples min_samples\nls-cluster datavis-misunderstood umap-001 5 5\n# ls-label dataset_id text_column cluster_id model_id context\nls-label datavis-misunderstood \"answer\" cluster-001 transformers-HuggingFaceH4___zephyr-7b-beta \"\"\n# ls-scope  dataset_id embedding_id umap_id cluster_id cluster_labels_id label description\nls-scope datavis-misunderstood cluster-001-labels-001 \"E5 demo\" \"E5 embeddings summarized by Zephyr 7B\"\n# start the server to explore your scope\nls-serve\n</code></pre>\n<h3 id=\"repository-overview\">Repository overview</h3>\n<p>This repository is currently meant to run locally, with a React frontend that communicates with a python server backend. We support several popular open source embedding models that can run locally as well as proprietary API embedding services. Adding new models and services should be quick and easy.</p>\n<p>To learn more about customizing, extending and contributing see <a href=\"documentation/DEVELOPMENT.md\">DEVELOPMENT.md</a></p>\n<h3 id=\"design-principles\">Design principles</h3>\n<p>This tool is meant to be a part of a larger process. Something that hopefully helps you see things in your data that you wouldn't otherwise have. That means it needs to be easy to get data in, and easily get useful data out.</p>\n<ol>\n<li>Flat files</li>\n</ol>\n<ul>\n<li>All of the data that drives the app is stored in flat files. This is so that both final and intermediate outputs can easily be exported for other uses. It also makes it easy to see the status of any part of the process.</li>\n</ul>\n<ol>\n<li>Remember everything</li>\n</ol>\n<ul>\n<li>This tool is intended to aid in research, the purpose is experimentation and exploration. I developed it because far too often I try a lot of things and then I forget what parameters lead me down a promising path in the first place. All choices you make in the process are recorded in metadata files along with the output of the process.</li>\n</ul>\n<ol>\n<li>It's all about the indices</li>\n</ol>\n<ul>\n<li>We consider an input dataset the source of truth, a list of rows that can be indexed into. So all downstream operations, whether its embeddings, pointing to nearest neighbors or assigning data points to clusters, all use indices into the input dataset.</li>\n</ul>\n<h2 id=\"command-line-scripts-detailed-description\">Command Line Scripts: Detailed description</h2>\n<p>If you want to use the CLI instead of the web UI you can use the following scripts.</p>\n<p>The scripts should be run in order once you have an <code>input.csv</code> file in your folder. Alternatively the Setup page in the web UI will run these scripts via API calls to the server for you.<br />\nThese scripts expect at the least a <code>LATENT_SCOPE_DATA</code> environment variable with a path to where you want to store your data. If you run <code>ls-serve</code> it will set the variable and put it in a <code>.env</code> file. You can add API keys to the .env file to enable usage of the various API services, see <a href=\".env.example\">.env.example</a> for the structure.</p>\n<h3 id=\"0-ingest\">0. ingest</h3>\n<p>This script turns the <code>input.csv</code> into <code>input.parquet</code> and sets up the directories and <code>meta.json</code> which run the app.</p>\n<pre><code class=\"language-bash\"># ls-ingest &lt;dataset_name&gt;\nls-ingest database-curated\n</code></pre>\n<h3 id=\"1-embed\">1. embed</h3>\n<p>Take the text from the input and embed it. Default is to use <code>BAAI/bge-small-en-v1.5</code> locally via HuggingFace transformers. API services are supported as well, see <a href=\"latentscope/models/embedding_models.json\">latentscope/models/embedding_models.json</a> for model ids.</p>\n<pre><code class=\"language-bash\"># you can get a list of models available with:\nls-list-models\n# ls-embed &lt;dataset_name&gt; &lt;text_column&gt; &lt;model_id&gt;\nls-embed dadabase joke transformers-intfloat___e5-small-v2\n</code></pre>\n<h3 id=\"2-umap\">2. umap</h3>\n<p>Map the embeddings from high-dimensional space to 2D with UMAP. Will generate a thumbnail of the scatterplot.</p>\n<pre><code class=\"language-bash\"># ls-umap &lt;dataset_name&gt; &lt;embedding_id&gt; &lt;neighbors&gt; &lt;min_dist&gt;\nls-umap dadabase embedding-001 50 0.1\n</code></pre>\n<h3 id=\"3-cluster\">3. cluster</h3>\n<p>Cluster the UMAP points using HDBSCAN. This will label each point with a cluster label</p>\n<pre><code class=\"language-bash\"># ls-cluster &lt;dataset_name&gt; &lt;umap_id&gt; &lt;samples&gt; &lt;min-samples&gt;\nls-cluster dadabase umap-001 5 3\n</code></pre>\n<h3 id=\"4-label\">4. label</h3>\n<p>We support auto-labeling clusters by summarizing them with an LLM. Supported models and APIs are listed in <a href=\"latentscope/models/chat_models.json\">latentscope/models/chat_models.json</a>.\nYou can pass context that will be injected into the system prompt for your dataset.</p>\n<pre><code class=\"language-bash\"># ls-label &lt;dataset_id&gt; &lt;cluster_id&gt; &lt;chat_model_id&gt; &lt;context&gt;\nls-label dadabase \"joke\" cluster-001 openai-gpt-3.5-turbo \"\"\n</code></pre>\n<h3 id=\"5-scope\">5. scope</h3>\n<p>The scope command ties together each step of the process to create an explorable configuration. You can have several scopes to view different choices, for example using different embeddings or even different parameters for UMAP and clustering. Switching between scopes in the UI is instant.</p>\n<pre><code class=\"language-bash\"># ls-scope  &lt;dataset_id&gt; &lt;embedding_id&gt; &lt;umap_id&gt; &lt;cluster_id&gt; &lt;cluster_labels_id&gt; &lt;label&gt; &lt;description&gt;\nls-scope datavis-misunderstood cluster-001-labels-001 \"E5 demo\" \"E5 embeddings summarized by GPT3.5-Turbo\"\n</code></pre>\n<h3 id=\"6-serve\">6. serve</h3>\n<p>To start the web UI we run a small server. This also enables nearest neighbor similarity search and interactively querying subsets of the input data while exploring the scopes.</p>\n<pre><code class=\"language-bash\">ls-serve ~/latent-scope-data\n</code></pre>\n<h2 id=\"dataset-directory-structure\">Dataset directory structure</h2>\n<p>Each dataset will have its own directory in data/ created when you ingest your CSV. All subsequent steps of setting up a dataset write their data and metadata to this directory.\nThere are no databases in this tool, just flat files that are easy to copy and edit.</p>\n<pre>├── data/\n|   ├── dataset1/\n|   |   ├── input.parquet                           # from ingest.py, the dataset\n|   |   ├── meta.json                               # from ingest.py, metadata for dataset, #rows, columns, text_column\n|   |   ├── embeddings/\n|   |   |   ├── embedding-001.h5                    # from embed.py, embedding vectors\n|   |   |   ├── embedding-001.json                  # from embed.py, parameters used to embed\n|   |   |   ├── embedding-002...                   \n|   |   ├── umaps/\n|   |   |   ├── umap-001.parquet                    # from umap.py, x,y coordinates\n|   |   |   ├── umap-001.json                       # from umap.py, params used\n|   |   |   ├── umap-001.png                        # from umap.py, thumbnail of plot\n|   |   |   ├── umap-002....                        \n|   |   ├── clusters/\n|   |   |   ├── clusters-001.parquet                # from cluster.py, cluster indices\n|   |   |   ├── clusters-001-labels-default.parquet # from cluster.py, default labels\n|   |   |   ├── clusters-001-labels-001.parquet     # from label_clusters.py, LLM generated labels\n|   |   |   ├── clusters-001.json                   # from cluster.py, params used\n|   |   |   ├── clusters-001.png                    # from cluster.py, thumbnail of plot\n|   |   |   ├── clusters-002...                     \n|   |   ├── scopes/\n|   |   |   ├── scopes-001.json                     # from scope.py, combination of embed, umap, clusters and label choice\n|   |   |   ├── scopes-...                      \n|   |   ├── tags/\n|   |   |   ├── ❤️.indices                           # tagged by UI, powered by tags.py\n|   |   |   ├── ...                                 # can have arbitrary named tags\n|   |   ├── jobs/\n|   |   |   ├──  8980️-12345...json                  # created when job is run via web UI\n</pre>",
    "raw": "# Latent Scope\n\nQuickly embed, project, cluster and explore a dataset. This project is a new kind of workflow + tool for visualizing and exploring datasets through the lens of latent spaces. \n[<img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/dadabase-explore.png?raw=true\" height=\"480px\"  alt=\"Example exploration\">](https://enjalot.github.io/latent-scope/#/datasets/dadabase/explore/scopes-007)\n\nThe power of machine learning models to encode unstructured data into high-dimensional embeddings is relatively under-explored. Retrieval Augmented Generation has taken off as a popular usecase for embeddings, but do you feel confident in your understanding of why certain data is being retrieved? Do you have a clear picture of what all is in your dataset? Latentscope is like a microscope that allows you to get a new perspective on what's happening to your data when it's embedded. You can try similarity search with different embeddings, peruse automatically labeled clusters and zoom in on individual data points all while keeping the context of your entire dataset. \n\n### Demo\nThis tool is meant to be run locally or on a trusted server to process data for viewing in the latent scope. You can see the result of the process in a read-only [live demo](https://enjalot.github.io/latent-scope):\n* [datavis survey responses](https://enjalot.github.io/latent-scope/#/datasets/datavis-misunderstood/explore/scopes-001) - 700 survey responses\n* [Dolly 15k](https://enjalot.github.io/latent-scope/#/datasets/dolly15k/explore/scopes-001) - 15k instructions\n* [r/DadJokes](https://enjalot.github.io/latent-scope/#/datasets/dadabase/explore/scopes-004) - 50k dad jokes\n* [emotion](https://enjalot.github.io/latent-scope/#/datasets/emotion/explore/scopes-001) - 400k emotion statements from Twitter\n\nThe source of each demo dataset is documented in the notebooks linked below. Each demo was chosen to represent different scales of data as well as some common usecases.\n\n[<img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/dadabase-scopes.png?raw=true\" width=\"100%\"  alt=\"Dadabase demo scopes\">](https://enjalot.github.io/latent-scope)\n\n\n### Quick Start\nTo get started, install the [latent-scope module](https://pypi.org/project/latentscope/) and run the server via the Command Line:\n\n```bash\npython -m venv venv\nsource venv/bin/activate\npip install latent-scope\nls-serve ~/local-scope-data\n```\n\nThen open your browser to http://localhost:5001 and start processing your first dataset!  \n<img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/home.png?raw=true\" width=\"320px\"  alt=\"Ingest\">  <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/0-ingest.png?raw=true\" width=\"320px\"  alt=\"Ingest\">\n\nOnce ingested, you will go through the following 6 steps: Embed, UMAP, Cluster, Label, Scope and Explore \n <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/1-embed.png?raw=true\" width=\"320px\"  alt=\"Embed\"> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/2-umap.png?raw=true\" width=\"320px\"  alt=\"UMAP\"> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/3-cluster.png?raw=true\" width=\"320px\"  alt=\"Cluster\"> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/4-label.png?raw=true\" width=\"320px\"  alt=\"Label\"> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/5-scope.png?raw=true\" width=\"320px\"  alt=\"Scope\"> <img src=\"https://github.com/enjalot/latent-scope/blob/main/documentation/6-explore.png?raw=true\" width=\"320px\"  alt=\"Scope\">\n\nEach step focuses on the relevant choices to move you to the next step. For example choosing which embedding model you want to use to embed with, or the parameters for UMAP. It's very likely you may want to try several choices at each step, which is why the final step before \"Explore\" is to make a \"scope\". You can make multiple scopes, as seen in the [dadabase example](https://enjalot.github.io/latent-scope/#/datasets/dadabase/explore/scopes-004) to explore your data through different lenses (i.e. OpenAI embeddings vs. Jina v2).\n\n### Python interface\nYou can also ingest data from a Pandas dataframe using the Python interface:\n```python\nfrom latentscope import ls\ndf = pd.read_parquet(\"...\")\nls.init(\"~/latent-scope-data\")\nls.ingest(\"dadabase\", df, text_column=\"joke\")\nls.serve()\n```\n\n\nSee these notebooks for detailed examples of using the Python interface to prepare and load data.  \n* [dvs-survey](notebooks/dvs-survey.ipynb) - A small test dataset of 700 rows to quickly illustrate the process. This notebook shows how you can do every step of the process with the Python interface.\n* [dadabase](notebooks/dadabase.ipynb) - A more interesting (and funny) dataset of 50k rows. This notebook shows how you can preprocess a dataset, ingest it into latentscope and then use the web interface to complete the process.\n* [dolly15k](notebooks/dolly15k.ipynb) - Grab data from HuggingFace datasets and ingest into the process.\n* [emotion](notebooks/emotion.ipynb) - 400k rows of emotional tweets.\n\n### Command line quick start\nWhen latent-scope is installed, it creates a suite of command line scripts that can be used to setup the scopes for exploring in the web application. The output of each step in the process is flat files stored in the data directory specified at init. These files are in standard formats that were designed to be ported into other pipelines or interfaces.\n\n```bash\n# like above, we make sure to install latent-scope\npython -m venv venv\nsource venv/bin/activate\npip install latent-scope\n\n# prepare some data\nwget \"https://storage.googleapis.com/fun-data/latent-scope/examples/dvs-survey/datavis-misunderstood.csv\" > ~/Downloads/datavis-misunderstood.csv\n\nls-init \"~/latent-scope-data\"\n# ls-ingest dataset_id csv_path\nls-ingest-csv \"datavis-misunderstood\" \"~/Downloads/datavis-misunderstood.csv\"\n# get a list of model ids available (lists both embedding and chat models available)\nls-list-models\n# ls-embed dataset_id text_column model_id prefix\nls-embed datavis-misunderstood \"answer\" transformers-intfloat___e5-small-v2 \"\"\n# ls-umap dataset_id embedding_id n_neighbors min_dist\nls-umap datavis-misunderstood embedding-001 25 .1\n# ls-cluster dataset_id umap_id samples min_samples\nls-cluster datavis-misunderstood umap-001 5 5\n# ls-label dataset_id text_column cluster_id model_id context\nls-label datavis-misunderstood \"answer\" cluster-001 transformers-HuggingFaceH4___zephyr-7b-beta \"\"\n# ls-scope  dataset_id embedding_id umap_id cluster_id cluster_labels_id label description\nls-scope datavis-misunderstood cluster-001-labels-001 \"E5 demo\" \"E5 embeddings summarized by Zephyr 7B\"\n# start the server to explore your scope\nls-serve\n```\n\n### Repository overview\nThis repository is currently meant to run locally, with a React frontend that communicates with a python server backend. We support several popular open source embedding models that can run locally as well as proprietary API embedding services. Adding new models and services should be quick and easy.\n\nTo learn more about customizing, extending and contributing see [DEVELOPMENT.md](documentation/DEVELOPMENT.md)\n\n\n### Design principles\nThis tool is meant to be a part of a larger process. Something that hopefully helps you see things in your data that you wouldn't otherwise have. That means it needs to be easy to get data in, and easily get useful data out.\n\n1. Flat files\n  - All of the data that drives the app is stored in flat files. This is so that both final and intermediate outputs can easily be exported for other uses. It also makes it easy to see the status of any part of the process.\n2. Remember everything\n  - This tool is intended to aid in research, the purpose is experimentation and exploration. I developed it because far too often I try a lot of things and then I forget what parameters lead me down a promising path in the first place. All choices you make in the process are recorded in metadata files along with the output of the process.\n3. It's all about the indices\n  - We consider an input dataset the source of truth, a list of rows that can be indexed into. So all downstream operations, whether its embeddings, pointing to nearest neighbors or assigning data points to clusters, all use indices into the input dataset.\n\n\n## Command Line Scripts: Detailed description\nIf you want to use the CLI instead of the web UI you can use the following scripts.\n\nThe scripts should be run in order once you have an `input.csv` file in your folder. Alternatively the Setup page in the web UI will run these scripts via API calls to the server for you.  \nThese scripts expect at the least a `LATENT_SCOPE_DATA` environment variable with a path to where you want to store your data. If you run `ls-serve` it will set the variable and put it in a `.env` file. You can add API keys to the .env file to enable usage of the various API services, see [.env.example](.env.example) for the structure.\n\n\n### 0. ingest\nThis script turns the `input.csv` into `input.parquet` and sets up the directories and `meta.json` which run the app.\n\n```bash\n# ls-ingest <dataset_name>\nls-ingest database-curated\n```\n\n### 1. embed\nTake the text from the input and embed it. Default is to use `BAAI/bge-small-en-v1.5` locally via HuggingFace transformers. API services are supported as well, see [latentscope/models/embedding_models.json](latentscope/models/embedding_models.json) for model ids. \n\n```bash\n# you can get a list of models available with:\nls-list-models\n# ls-embed <dataset_name> <text_column> <model_id>\nls-embed dadabase joke transformers-intfloat___e5-small-v2\n```\n\n### 2. umap\nMap the embeddings from high-dimensional space to 2D with UMAP. Will generate a thumbnail of the scatterplot.\n```bash\n# ls-umap <dataset_name> <embedding_id> <neighbors> <min_dist>\nls-umap dadabase embedding-001 50 0.1\n```\n\n\n### 3. cluster\nCluster the UMAP points using HDBSCAN. This will label each point with a cluster label\n```bash\n# ls-cluster <dataset_name> <umap_id> <samples> <min-samples>\nls-cluster dadabase umap-001 5 3\n```\n\n### 4. label\nWe support auto-labeling clusters by summarizing them with an LLM. Supported models and APIs are listed in [latentscope/models/chat_models.json](latentscope/models/chat_models.json). \nYou can pass context that will be injected into the system prompt for your dataset.\n```bash\n# ls-label <dataset_id> <cluster_id> <chat_model_id> <context>\nls-label dadabase \"joke\" cluster-001 openai-gpt-3.5-turbo \"\"\n```\n\n### 5. scope\nThe scope command ties together each step of the process to create an explorable configuration. You can have several scopes to view different choices, for example using different embeddings or even different parameters for UMAP and clustering. Switching between scopes in the UI is instant.\n\n```bash\n# ls-scope  <dataset_id> <embedding_id> <umap_id> <cluster_id> <cluster_labels_id> <label> <description>\nls-scope datavis-misunderstood cluster-001-labels-001 \"E5 demo\" \"E5 embeddings summarized by GPT3.5-Turbo\"\n```\n\n### 6. serve\nTo start the web UI we run a small server. This also enables nearest neighbor similarity search and interactively querying subsets of the input data while exploring the scopes.\n\n```bash\nls-serve ~/latent-scope-data\n```\n\n\n## Dataset directory structure\nEach dataset will have its own directory in data/ created when you ingest your CSV. All subsequent steps of setting up a dataset write their data and metadata to this directory.\nThere are no databases in this tool, just flat files that are easy to copy and edit.\n<pre>\n├── data/\n|   ├── dataset1/\n|   |   ├── input.parquet                           # from ingest.py, the dataset\n|   |   ├── meta.json                               # from ingest.py, metadata for dataset, #rows, columns, text_column\n|   |   ├── embeddings/\n|   |   |   ├── embedding-001.h5                    # from embed.py, embedding vectors\n|   |   |   ├── embedding-001.json                  # from embed.py, parameters used to embed\n|   |   |   ├── embedding-002...                   \n|   |   ├── umaps/\n|   |   |   ├── umap-001.parquet                    # from umap.py, x,y coordinates\n|   |   |   ├── umap-001.json                       # from umap.py, params used\n|   |   |   ├── umap-001.png                        # from umap.py, thumbnail of plot\n|   |   |   ├── umap-002....                        \n|   |   ├── clusters/\n|   |   |   ├── clusters-001.parquet                # from cluster.py, cluster indices\n|   |   |   ├── clusters-001-labels-default.parquet # from cluster.py, default labels\n|   |   |   ├── clusters-001-labels-001.parquet     # from label_clusters.py, LLM generated labels\n|   |   |   ├── clusters-001.json                   # from cluster.py, params used\n|   |   |   ├── clusters-001.png                    # from cluster.py, thumbnail of plot\n|   |   |   ├── clusters-002...                     \n|   |   ├── scopes/\n|   |   |   ├── scopes-001.json                     # from scope.py, combination of embed, umap, clusters and label choice\n|   |   |   ├── scopes-...                      \n|   |   ├── tags/\n|   |   |   ├── ❤️.indices                           # tagged by UI, powered by tags.py\n|   |   |   ├── ...                                 # can have arbitrary named tags\n|   |   ├── jobs/\n|   |   |   ├──  8980️-12345...json                  # created when job is run via web UI\n</pre>\n",
    "excerpt": "Quickly embed, project, cluster and explore a dataset. This project is a new kind of workflow + tool for visualizing and exploring datasets through the lens of..."
  },
  "createdAt": "2024-02-15T20:49:34Z",
  "updatedAt": "2024-02-15T20:49:34Z",
  "pushedAt": "2024-02-15T20:50:05Z"
}