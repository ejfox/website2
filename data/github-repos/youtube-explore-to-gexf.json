{
  "name": "youtube-explore-to-gexf",
  "description": "A tool to convert youtube-explore outputs to gexf",
  "url": "https://github.com/ejfox/youtube-explore-to-gexf",
  "homepage": null,
  "stats": {
    "stars": 0,
    "forks": 0,
    "watchers": 0,
    "openIssues": 0
  },
  "language": "JavaScript",
  "languageColor": "#f1e05a",
  "languages": {
    "JavaScript": 5057
  },
  "diskUsage": 18,
  "fileTree": {
    "files": [
      {
        "path": ".gitignore",
        "size": 14
      },
      {
        "path": "README.md",
        "size": 5790
      },
      {
        "path": "index.js",
        "size": 5057
      },
      {
        "path": "package-lock.json",
        "size": 17275
      },
      {
        "path": "package.json",
        "size": 842
      }
    ],
    "tree": {
      "name": "youtube-explore-to-gexf",
      "children": [
        {
          "name": ".gitignore",
          "size": 14,
          "path": ".gitignore"
        },
        {
          "name": "README.md",
          "size": 5790,
          "path": "README.md"
        },
        {
          "name": "index.js",
          "size": 5057,
          "path": "index.js"
        },
        {
          "name": "package-lock.json",
          "size": 17275,
          "path": "package-lock.json"
        },
        {
          "name": "package.json",
          "size": 842,
          "path": "package.json"
        }
      ],
      "path": ""
    },
    "totalFiles": 5,
    "totalSize": 28978
  },
  "topics": [],
  "readme": {
    "html": "<h2 id=\"usage\">Usage</h2>\n<p>Run the <a>youtube-explore</a> tool with a command similar to <code>python2.7 follow-youtube-recommendations.py --query=\"global warming,vaccines,nasa\" --searches=4 --branch=4 --depth=4 --name=\"science\"</code></p>\n<p>This will generate a JSON file. This tool provides the ability to convert the resulting JSON file to the <a href=\"https://gephi.org/gexf/format/\">.gexf</a> file format so it can be easily imported into <a href=\"https://gephi.org/\">Gephi</a></p>\n<ol>\n<li>Git clone this repo</li>\n<li>Copy the JSON file you want to analyze into the folder</li>\n<li>Run <code>node convertYoutubeScrapeToGexf.js --filename=video-infos-SOURCE.json &gt; OUTPUT.gexf</code> to send the output of the conversion to a new file named <code>OUTPUT.gexf</code></li>\n<li>In Gephi <code>File &gt; Open</code> and then select the newly created output .gexf file</li>\n<li>Analyze your recommendation network with Gephi</li>\n</ol>\n<h2 id=\"global-installation\">Global installation</h2>\n<p>This tool is also available as an npm package.</p>\n<ul>\n<li><code>npm install -g youtube-explore-to-gexf</code></li>\n</ul>\n<h3 id=\"usage-1\">Usage</h3>\n<ul>\n<li><code>youtube-explore-to-gexf --filename=video-infos-SOURCE.json &gt; OUTPUT.gexf</code></li>\n</ul>\n<h2 id=\"how-it-works\">How it works</h2>\n<p>We are going to convert the output JSON of a YouTube recommendation scrape performed with <a href=\"https://github.com/pnbt/youtube-explore\">https://github.com/pnbt/youtube-explore</a></p>\n<p>Let's load the file</p>\n<pre><code class=\"language-javascript\">var fs = require('fs') // To load things from filesystem\nvar _ = require('lodash') // To process data\nvar filename = 'data/video-infos-candidates2020-Andrew Yang-20190415.json' // File to process\nvar scrape = JSON.parse(fs.readFileSync(filename, 'utf8')) // Load the file\nvar gexf = require('gexf') // To read and write gexf data\nconst argv = require('yargs').argv\n</code></pre>\n<p>Accept filenames when run through CLI\nBy adding the flag <code>--filename=PATH-TO-YOUR-FILE</code></p>\n<h4 id=\"example-command\">Example command</h4>\n<p><code>&gt; node convertYoutubeScrapeToGexf.js --filename=data/video-infos-candidates2020-Bernie\\ Sanders-20190415.json &gt; bernie.gexf</code></p>\n<h2 id=\"the-data\">The data</h2>\n<ul>\n<li>At the top level is an array of videos that are the result of the search</li>\n<li>If you dive into any of these videos... (which have a unique ID like <code>4U2eDJnwz_s</code>)</li>\n</ul>\n<h4 id=\"you-get-the-following-data\">You get the following data:</h4>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>key</th><th>value</th></tr></thead><tbody><tr><td>pubdate</td><td>\"2016-08-14\"</td></tr><tr><td>views</td><td>10545448</td></tr><tr><td>dislikes</td><td>3374</td></tr><tr><td>likes</td><td>93179</td></tr><tr><td>key</td><td>[ (0) ]</td></tr><tr><td>duration</td><td>1076</td></tr><tr><td>id</td><td>\"4U2eDJnwz_s\"</td></tr><tr><td>mult</td><td>0.8598425196850393</td></tr><tr><td>title</td><td>\"Auto Lending: Last Week Tonight with John Oliver (HBO)\"</td></tr><tr><td>nb_recommendations</td><td>2</td></tr><tr><td>depth</td><td>1</td></tr><tr><td>recommendations</td><td>[ (20) video ID strings ]</td></tr><tr><td>channel</td><td>\"LastWeekTonight\"</td></tr></tbody></table>\n<p>The unique ID can be used to generate a link to the actual video like so\nExample: <a href=\"https://www.youtube.com/watch?v=UNIQUE-ID-HERE\">https://www.youtube.com/watch?v=UNIQUE-ID-HERE</a>\nThis video's URL: <a href=\"https://www.youtube.com/watch?v=4U2eDJnwz_s\">https://www.youtube.com/watch?v=4U2eDJnwz_s</a></p>\n<p>The <code>recommendations</code> key contains an array of 20 more IDs of videos that are recommended from this video</p>\n<h2 id=\"converting-to-gexf-which-is-a-lot-like-xml\">Converting to GEXF (which is a lot like XML)</h2>\n<p>Okay, now that we know the general shape of our source data\nWe need to figure out how to convert it so that it can be read by GEPHI\nOr other software through the GEXF graph format\nLike most directed graphs, the two main components are</p>\n<ul>\n<li>Nodes: A list of every entity, in our case YouTube videos</li>\n<li>Edges: A list of every link between entities, in our case recommendations</li>\n</ul>\n<h2 id=\"nodes\">Nodes</h2>\n<p>Nodes have an ID, a label, and other data can be attached for analysis in GEPHI\nYou end up with something like <code>&lt;node id=\"0\" label=\"Hello\" /&gt;</code></p>\n<h2 id=\"links\">Links</h2>\n<p>Links have a unique ID\nThe \"source\" field is the unique ID for the source node which in our case is the video that is being recommended from\nThe \"target\" field is the unique ID of the recommended video</p>\n<p>A hello world GEXF graph would look something like this</p>\n<pre><code class=\"language-xml\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;gexf xmlns=\"http://www.gexf.net/1.2draft\" version=\"1.2\"&gt;\n    &lt;meta lastmodifieddate=\"2009-03-20\"&gt;\n        &lt;creator&gt;Gexf.net&lt;/creator&gt;\n        &lt;description&gt;A hello world! file&lt;/description&gt;\n    &lt;/meta&gt;\n    &lt;graph mode=\"static\" defaultedgetype=\"directed\"&gt;\n        &lt;nodes&gt;\n            &lt;node id=\"0\" label=\"Hello\" /&gt;\n            &lt;node id=\"1\" label=\"Word\" /&gt;\n        &lt;/nodes&gt;\n        &lt;edges&gt;\n            &lt;edge id=\"0\" source=\"0\" target=\"1\" /&gt;\n        &lt;/edges&gt;\n    &lt;/graph&gt;\n&lt;/gexf&gt;\n</code></pre>\n<p>So let's loop over our JSON file and fill our nodes and links</p>\n<pre><code class=\"language-javascript\">_.each(scrape, function(video) {\n  var sourceID = video.id // Get the source video ID\n  nodes.push({\n    id: sourceID,\n    label: video.title,\n    attributes: {\n      duration: video.duration,\n      likes: video.likes,\n      dislikes: video.dislikes,\n      pubdate: video.pubdate,\n      mult: video.mult,\n      channel: video.channel\n    }\n  }) // Add source video as node\n  _.each(video.recommendations, function(rec, i) {\n    // Generate new links for every recommended video\n    var newLink = {\n      id: sourceID + '-' + rec + '-' + i,\n      source: sourceID,\n      target: rec\n    }\n    links.push(newLink) // Add to our list of links\n  })\n})\n</code></pre>\n<p>So now we have our links and nodes in JSON format\nWe're going to use the <a href=\"https://github.com/Yomguithereal/gexf#writer\">gexf library</a>\nTo convert things</p>\n<pre><code class=\"language-javascript\">var convertedGraph = gexf.create({\n  defaultEdgeType: 'directed',\n  model: {\n    node: [\n      {\n        id: 'duration',\n        type: 'float',\n        title: 'likes'\n      },\n      {\n        id: 'likes',\n        type: 'float',\n        title: 'likes'\n      },\n      {\n        id: 'dislikes',\n        type: 'float',\n        title: 'dislikes'\n      },\n      {\n        id: 'mult',\n        type: 'float',\n        title: 'mult'\n      },\n      {\n        id: 'pubdate',\n        type: 'string',\n        title: 'pubdate'\n      },\n      {\n        id: 'channel',\n        type: 'string',\n        title: 'channel'\n      }\n    ]\n  },\n  nodes: nodes,\n  edges: links\n})\n</code></pre>\n<h1 id=\"made-by-ej-fox-\">Made by EJ Fox ðŸŒž</h1>\n<h4 id=\"apr-16-2019\">Apr 16, 2019</h4>\n<p><a href=\"mailto:ejfox@ejfox.com\">ejfox@ejfox.com</a> // Questions, comments, collaboration welcome</p>\n<p>Support for my work is appreciated! <a href=\"https://ejfox.com/donate/\">https://ejfox.com/donate/</a></p>",
    "raw": "## Usage\nRun the [youtube-explore]() tool with a command similar to `python2.7 follow-youtube-recommendations.py --query=\"global warming,vaccines,nasa\" --searches=4 --branch=4 --depth=4 --name=\"science\"`\n\nThis will generate a JSON file. This tool provides the ability to convert the resulting JSON file to the [.gexf](https://gephi.org/gexf/format/) file format so it can be easily imported into [Gephi](https://gephi.org/)\n\n1. Git clone this repo\n1. Copy the JSON file you want to analyze into the folder\n1. Run `node convertYoutubeScrapeToGexf.js --filename=video-infos-SOURCE.json > OUTPUT.gexf` to send the output of the conversion to a new file named `OUTPUT.gexf`\n1. In Gephi `File > Open` and then select the newly created output .gexf file\n1. Analyze your recommendation network with Gephi\n\n## Global installation\nThis tool is also available as an npm package.\n\n+ `npm install -g youtube-explore-to-gexf`\n\n### Usage\n+ `youtube-explore-to-gexf --filename=video-infos-SOURCE.json > OUTPUT.gexf`\n\n## How it works\nWe are going to convert the output JSON of a YouTube recommendation scrape performed with https://github.com/pnbt/youtube-explore\n\nLet's load the file\n```javascript\nvar fs = require('fs') // To load things from filesystem\nvar _ = require('lodash') // To process data\nvar filename = 'data/video-infos-candidates2020-Andrew Yang-20190415.json' // File to process\nvar scrape = JSON.parse(fs.readFileSync(filename, 'utf8')) // Load the file\nvar gexf = require('gexf') // To read and write gexf data\nconst argv = require('yargs').argv\n```\n\nAccept filenames when run through CLI\nBy adding the flag `--filename=PATH-TO-YOUR-FILE`\n\n#### Example command\n`> node convertYoutubeScrapeToGexf.js --filename=data/video-infos-candidates2020-Bernie\\ Sanders-20190415.json > bernie.gexf`\n\n## The data\n+ At the top level is an array of videos that are the result of the search\n+ If you dive into any of these videos... (which have a unique ID like `4U2eDJnwz_s`)\n\n#### You get the following data:\n|key | value |\n|----|--------|\n|pubdate|   \"2016-08-14\"|\n|views|     10545448|\n|dislikes|  3374|\n|likes|     93179|\n|key|       [ (0) ]|\n|duration|  1076|\n|id|        \"4U2eDJnwz_s\"|\n|mult|      0.8598425196850393|\n|title|     \"Auto Lending: Last Week Tonight with John Oliver (HBO)\"|\n|nb_recommendations| 2|\n|depth|     1|\n|recommendations|    [ (20) video ID strings ]|\n|channel|   \"LastWeekTonight\"|\n\nThe unique ID can be used to generate a link to the actual video like so\nExample: https://www.youtube.com/watch?v=UNIQUE-ID-HERE\nThis video's URL: https://www.youtube.com/watch?v=4U2eDJnwz_s  \n\nThe `recommendations` key contains an array of 20 more IDs of videos that are recommended from this video\n\n## Converting to GEXF (which is a lot like XML)\n\nOkay, now that we know the general shape of our source data\nWe need to figure out how to convert it so that it can be read by GEPHI\nOr other software through the GEXF graph format\nLike most directed graphs, the two main components are\n+ Nodes: A list of every entity, in our case YouTube videos\n+ Edges: A list of every link between entities, in our case recommendations\n\n## Nodes\nNodes have an ID, a label, and other data can be attached for analysis in GEPHI\nYou end up with something like `<node id=\"0\" label=\"Hello\" />`\n\n## Links\nLinks have a unique ID\nThe \"source\" field is the unique ID for the source node which in our case is the video that is being recommended from\nThe \"target\" field is the unique ID of the recommended video\n\nA hello world GEXF graph would look something like this\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<gexf xmlns=\"http://www.gexf.net/1.2draft\" version=\"1.2\">\n    <meta lastmodifieddate=\"2009-03-20\">\n        <creator>Gexf.net</creator>\n        <description>A hello world! file</description>\n    </meta>\n    <graph mode=\"static\" defaultedgetype=\"directed\">\n        <nodes>\n            <node id=\"0\" label=\"Hello\" />\n            <node id=\"1\" label=\"Word\" />\n        </nodes>\n        <edges>\n            <edge id=\"0\" source=\"0\" target=\"1\" />\n        </edges>\n    </graph>\n</gexf>\n```\n\nSo let's loop over our JSON file and fill our nodes and links\n```javascript\n_.each(scrape, function(video) {\n  var sourceID = video.id // Get the source video ID\n  nodes.push({\n    id: sourceID,\n    label: video.title,\n    attributes: {\n      duration: video.duration,\n      likes: video.likes,\n      dislikes: video.dislikes,\n      pubdate: video.pubdate,\n      mult: video.mult,\n      channel: video.channel\n    }\n  }) // Add source video as node\n  _.each(video.recommendations, function(rec, i) {\n    // Generate new links for every recommended video\n    var newLink = {\n      id: sourceID + '-' + rec + '-' + i,\n      source: sourceID,\n      target: rec\n    }\n    links.push(newLink) // Add to our list of links\n  })\n})\n```\n\nSo now we have our links and nodes in JSON format\nWe're going to use the [gexf library](https://github.com/Yomguithereal/gexf#writer)\nTo convert things\n\n```javascript\nvar convertedGraph = gexf.create({\n  defaultEdgeType: 'directed',\n  model: {\n    node: [\n      {\n        id: 'duration',\n        type: 'float',\n        title: 'likes'\n      },\n      {\n        id: 'likes',\n        type: 'float',\n        title: 'likes'\n      },\n      {\n        id: 'dislikes',\n        type: 'float',\n        title: 'dislikes'\n      },\n      {\n        id: 'mult',\n        type: 'float',\n        title: 'mult'\n      },\n      {\n        id: 'pubdate',\n        type: 'string',\n        title: 'pubdate'\n      },\n      {\n        id: 'channel',\n        type: 'string',\n        title: 'channel'\n      }\n    ]\n  },\n  nodes: nodes,\n  edges: links\n})\n```\n\n# Made by EJ Fox ðŸŒž\n#### Apr 16, 2019\n\nejfox@ejfox.com // Questions, comments, collaboration welcome\n\nSupport for my work is appreciated! https://ejfox.com/donate/\n",
    "excerpt": "Run the [youtube-explore]() tool with a command similar to python2.7 follow-youtube-recommendations.py --query=\"global warming,vaccines,nasa\" --searches=4 --bra..."
  },
  "createdAt": "2019-04-16T18:19:47Z",
  "updatedAt": "2019-04-26T01:00:04Z",
  "pushedAt": "2019-04-16T18:53:35Z"
}